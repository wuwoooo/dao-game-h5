import{d as O,I as P,s as U,u as q,i as H,r as v,C as k,o as J,b as Y,c as u,e as c,f as t,m as g,F as G,p as K,t as s,j as r,g as a,k as A,l as C,D as Q,q as W,J as X,O as B,n as Z,_ as tt}from"./index-sn2Iz1lD.js";import{g as et,v as st,f as ot,j as rt}from"./app-WF9V_EMG.js";const lt={class:"stars-container absolute inset-0 z-0 overflow-hidden"},it={class:"sticky top-0 z-30 backdrop-blur-md bg-[#0f172a]/70 border-b border-indigo-500/20 w-full"},at={class:"max-w-7xl mx-auto px-2 sm:px-4 py-4 flex justify-between items-center"},nt={class:"flex items-center"},dt={class:"text-lg sm:text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-purple-300 to-indigo-300"},ut={class:"flex items-center space-x-3"},ct={key:0,class:"max-w-7xl mx-auto px-2 sm:px-4 py-24 z-10 relative"},pt={class:"bg-red-900/20 backdrop-blur-sm border border-red-500/20 rounded-lg p-6 text-center max-w-md mx-auto"},mt={class:"text-xl font-bold text-red-200 mb-2"},vt={class:"text-red-300 mb-4"},xt={class:"flex justify-center space-x-4"},ht={key:1,class:"flex justify-center items-center min-h-[70vh] z-10 relative"},ft={class:"cosmos-loader text-center"},gt={class:"text-indigo-300 mt-4 animate-pulse"},bt={key:2,class:"max-w-7xl mx-auto px-2 sm:px-4 py-24 z-10 relative"},yt={class:"max-w-md mx-auto bg-gradient-to-br from-green-900/30 to-blue-900/30 backdrop-blur-sm p-8 rounded-xl text-center border border-green-500/20"},wt={class:"text-3xl font-bold text-white mb-4"},_t={class:"text-green-200 mb-6"},kt={class:"bg-white/10 rounded-lg p-4 mb-6 border border-white/20"},At={class:"text-white font-medium mb-2"},Ct={class:"text-sm text-green-200 space-y-1"},Mt={class:"flex justify-center space-x-4"},Dt={key:3,class:"max-w-7xl mx-auto px-2 sm:px-4 py-8 z-10 relative"},zt={class:"relative mb-10 overflow-hidden rounded-xl"},jt={class:"relative z-[2] p-6 md:p-8 flex flex-col md:flex-row items-center backdrop-blur-md bg-white/10 border border-white/20 rounded-xl shadow-lg ring-1 ring-white/10"},St={class:"flex-1 text-center md:text-left text-white"},It={class:"text-3xl md:text-4xl font-bold mb-2"},Lt={class:"mb-2 flex flex-wrap justify-center md:justify-start gap-2"},$t={class:"text-xs px-3 py-1 rounded-full bg-indigo-600"},Ht={class:"text-xs px-3 py-1 rounded-full bg-purple-600"},Bt={class:"opacity-80 mb-4"},Tt={class:"opacity-60 text-sm"},Rt={class:"text-green-400 font-medium"},Nt={class:"max-w-lg mx-auto"},Vt={class:"text-center p-8 bg-gradient-to-r from-green-900/30 to-blue-900/30 rounded-xl border border-green-500/20"},Et={class:"text-2xl font-bold text-white mb-4"},Ft={class:"text-green-200 mb-6"},Ot={class:"bg-white/10 rounded-lg p-4 mb-6 border border-white/20"},Pt={class:"text-white font-medium mb-2"},Ut={class:"text-sm text-green-200 space-y-1"},qt=["disabled"],Jt={key:0,class:"w-6 h-6 mr-2 animate-spin",fill:"none",viewBox:"0 0 24 24"},Yt={key:0,class:"mt-4 text-sm text-red-300"},Gt={class:"max-w-2xl mx-auto mt-10"},Kt={class:"bg-indigo-900/20 rounded-xl p-6 border border-indigo-500/20"},Qt={class:"text-white font-medium mb-4 text-lg"},Wt={class:"text-indigo-300 text-sm space-y-2"},Xt={class:"flex items-start"},Zt={class:"flex items-start"},te={class:"flex items-start"},ee={key:0,class:"mt-4 p-3 bg-indigo-800/30 rounded text-indigo-200 text-xs"},se=O({__name:"HelpAssist",setup(oe){const{t:o}=P(),T=U();q();const w=H("openLoginReminder"),M=H("isLoggedIn"),D=v(""),l=v(null),x=v(null),_=v(!0),f=v(""),h=v(!1),z=v(!1),R=k(()=>et()),b=k(()=>!(!l.value||l.value.status!=="active"||l.value.helpCount>=l.value.maxHelpCount)),N=k(()=>l.value?l.value.status!=="active"?o("lottery.helpAssist.inviteInvalid"):l.value.helpCount>=l.value.maxHelpCount?o("lottery.helpAssist.limitReached"):"":"");async function j(){var n,e,d;_.value=!0,f.value="";try{const i=T.params.code;if(!i){f.value="邀请码无效";return}D.value=i;const p=await st(i);if(p.data&&p.data.code===0){if(l.value=p.data.data,(n=l.value)!=null&&n.lotteryId)try{const m=await ot(l.value.lotteryId);((e=m.data)==null?void 0:e.code)===0&&(x.value=m.data.data)}catch(m){console.error("获取助力配置失败:",m)}}else throw new Error(((d=p.data)==null?void 0:d.msg)||"获取邀请详情失败")}catch(i){console.error("获取邀请详情失败:",i),f.value=i.message||"网络错误，请稍后再试"}finally{_.value=!1}}async function V(){var n;if(!(h.value||!b.value)){if(!M()){w();return}h.value=!0;try{const e=X();if(!(e!=null&&e.uid)){B.error("请先登录",void 0,o);return}const d=await rt(D.value,e.uid);if(d.data&&d.data.code===0){z.value=!0;const i=new Audio;i.src="https://assets.mixkit.co/sfx/preview/mixkit-winning-chimes-2015.mp3",i.volume=.6,i.play()}else throw new Error(((n=d.data)==null?void 0:n.msg)||"助力失败")}catch(e){console.error("助力失败:",e),B.error(e.message||"网络错误，请稍后再试",void 0,o)}finally{h.value=!1}}}function E(){j()}function F(n){if(!n)return"";const e=new Date(n);return`${e.getFullYear()}-${(e.getMonth()+1).toString().padStart(2,"0")}-${e.getDate().toString().padStart(2,"0")} ${e.getHours().toString().padStart(2,"0")}:${e.getMinutes().toString().padStart(2,"0")}`}return J(()=>{j()}),(n,e)=>{var i,p,m,S,I,L,$;const d=Y("router-link");return c(),u("div",{class:W(["help-assist min-h-screen bg-gradient-to-b from-[#0f172a] via-[#1e293b] to-[#334155] relative overflow-hidden w-full max-w-full",R.value])},[t("div",lt,[(c(),u(G,null,K(50,y=>t("div",{key:`star-${y}`,class:"star absolute rounded-full",style:Z({width:`${Math.random()*3+1}px`,height:`${Math.random()*3+1}px`,top:`${Math.random()*100}%`,left:`${Math.random()*100}%`,animationDelay:`${Math.random()*10}s`,animationDuration:`${Math.random()*10+10}s`})},null,4)),64))]),t("header",it,[t("div",at,[t("div",nt,[t("div",{onClick:e[0]||(e[0]=y=>n.$router.back()),class:"text-indigo-300 mr-3 hover:text-indigo-200 transition-colors flex items-center cursor-pointer"},e[2]||(e[2]=[t("svg",{class:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M19 12H5M12 19l-7-7 7-7"})],-1)])),t("h1",dt,s(r(o)("lottery.helpAssist.title")),1)]),t("div",ut,[r(M)()?g("",!0):(c(),u("button",{key:0,onClick:e[1]||(e[1]=(...y)=>r(w)&&r(w)(...y)),class:"px-4 py-2 bg-gradient-to-r from-purple-500/20 to-indigo-500/20 backdrop-blur-sm rounded-lg text-indigo-100 hover:from-purple-500/30 hover:to-indigo-500/30 transition-all border border-indigo-400/20 flex items-center"},e[3]||(e[3]=[t("svg",{class:"w-4 h-4 mr-1",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M15 3h4a2 2 0 012 2v14a2 2 0 01-2 2h-4"}),t("polyline",{points:"10 17 15 12 10 7"}),t("line",{x1:"15",y1:"12",x2:"3",y2:"12"})],-1),a(" 连接钱包 ")])))])])]),f.value?(c(),u("div",ct,[t("div",pt,[e[6]||(e[6]=t("svg",{class:"w-16 h-16 mx-auto mb-4 text-red-400",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5"},[t("circle",{cx:"12",cy:"12",r:"10"}),t("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),t("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})],-1)),t("h2",mt,s(r(o)("lottery.helpAssist.assistFailed")),1),t("p",vt,s(f.value),1),t("div",xt,[t("button",{onClick:E,class:"px-5 py-2 bg-red-600/30 hover:bg-red-600/50 text-red-100 rounded-lg transition-all flex items-center"},[e[4]||(e[4]=t("svg",{class:"w-4 h-4 mr-2",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M23 4v6h-6"}),t("path",{d:"M1 20v-6h6"}),t("path",{d:"M3.51 9a9 9 0 0114.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0020.49 15"})],-1)),a(" "+s(r(o)("lottery.helpAssist.retry")),1)]),A(d,{to:"/lottery",class:"px-5 py-2 bg-indigo-600/30 hover:bg-indigo-600/50 text-indigo-100 rounded-lg transition-all flex items-center"},{default:C(()=>[e[5]||(e[5]=t("svg",{class:"w-4 h-4 mr-2",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M3 9l9-7 9 7v11a2 2 0 01-2 2H5a2 2 0 01-2-2z"}),t("polyline",{points:"9 22 9 12 15 12 15 22"})],-1)),a(" "+s(r(o)("lottery.helpAssist.backToList")),1)]),_:1})])])])):_.value?(c(),u("div",ht,[t("div",ft,[e[7]||(e[7]=Q('<svg width="80" height="80" viewBox="0 0 80 80" fill="none" data-v-828218cc><circle cx="40" cy="40" r="32" stroke="#8b5cf6" stroke-width="2" stroke-dasharray="80,60" stroke-linecap="round" data-v-828218cc><animateTransform attributeName="transform" type="rotate" from="0 40 40" to="360 40 40" dur="1.5s" repeatCount="indefinite" data-v-828218cc></animateTransform></circle><circle cx="40" cy="40" r="20" stroke="#a78bfa" stroke-width="2" stroke-dasharray="50,40" stroke-linecap="round" data-v-828218cc><animateTransform attributeName="transform" type="rotate" from="360 40 40" to="0 40 40" dur="1.2s" repeatCount="indefinite" data-v-828218cc></animateTransform></circle></svg>',1)),t("p",gt,s(r(o)("lottery.helpAssist.loading")),1)])])):z.value?(c(),u("div",bt,[t("div",yt,[e[8]||(e[8]=t("div",{class:"w-24 h-24 mx-auto mb-6 bg-gradient-to-br from-green-500 to-blue-600 rounded-full flex items-center justify-center animate-bounce"},[t("svg",{class:"w-12 h-12 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})])],-1)),t("h2",wt,s(r(o)("lottery.helpAssist.assistSuccess")),1),t("p",_t,s(r(o)("lottery.helpAssist.assistSuccessDesc")),1),t("div",kt,[t("div",At,s(r(o)("lottery.helpAssist.assistDetails")),1),t("div",Ct,[t("div",null,s(r(o)("lottery.helpAssist.inviter"))+": "+s(((i=l.value)==null?void 0:i.inviterUid)||"未知"),1),t("div",null,s(r(o)("lottery.helpAssist.lotteryActivity"))+": "+s(((p=l.value)==null?void 0:p.lotteryName)||"未知活动"),1),t("div",null,s(r(o)("lottery.helpAssist.assistTime"))+": "+s(F(new Date().toISOString())),1)])]),t("div",Mt,[A(d,{to:`/lottery/${(m=l.value)==null?void 0:m.lotteryId}`,class:"px-6 py-3 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-lg hover:from-indigo-700 hover:to-purple-700 transition-all"},{default:C(()=>[a(s(r(o)("lottery.helpAssist.participateLottery")),1)]),_:1},8,["to"]),A(d,{to:"/lottery",class:"px-6 py-3 bg-gray-600/50 hover:bg-gray-600/70 text-white rounded-lg transition-all"},{default:C(()=>[a(s(r(o)("lottery.helpAssist.browseActivities")),1)]),_:1})])])])):l.value?(c(),u("div",Dt,[t("div",zt,[e[10]||(e[10]=t("div",{class:"absolute inset-0",style:{backgroundImage:"url(https://source.unsplash.com/random/800x400/?crypto,nft)",backgroundSize:"cover",backgroundPosition:"center",filter:"blur(6px)",transform:"scale(1.1)",zIndex:0}},null,-1)),e[11]||(e[11]=t("div",{class:"absolute inset-0 bg-black/40 z-[1]"},null,-1)),t("div",jt,[e[9]||(e[9]=t("div",{class:"w-24 h-24 md:w-32 md:h-32 rounded-xl bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center mb-4 md:mb-0 md:mr-6"},[t("svg",{class:"w-16 h-16 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})])],-1)),t("div",St,[t("h1",It,s(r(o)("lottery.helpAssist.inviteTitle")),1),t("div",Lt,[t("span",$t,s(r(o)("lottery.helpAssist.inviteCode"))+": "+s(l.value.inviteCode),1),t("span",Ht,s(r(o)("lottery.helpAssist.assistProgress"))+": "+s(l.value.helpCount)+"/"+s(l.value.maxHelpCount),1)]),t("p",Bt,s(r(o)("lottery.helpAssist.inviteDesc")),1),t("div",Tt,[t("div",null,s(r(o)("lottery.helpAssist.inviter"))+": "+s(l.value.inviterUid),1),t("div",null,[a(s(r(o)("lottery.helpAssist.validPeriod"))+": ",1),t("span",Rt,s(r(o)("lottery.helpAssist.neverExpire")),1)])])])])]),t("div",Nt,[t("div",Vt,[e[13]||(e[13]=t("div",{class:"w-20 h-20 mx-auto mb-6 bg-gradient-to-br from-green-500 to-blue-600 rounded-full flex items-center justify-center animate-pulse"},[t("svg",{class:"w-10 h-10 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})])],-1)),t("h3",Et,s(r(o)("lottery.helpAssist.assistTitle")),1),t("p",Ft,s(r(o)("lottery.helpAssist.assistDesc")),1),t("div",Ot,[t("div",Pt,s(r(o)("lottery.helpAssist.assistRewards")),1),t("div",Ut,[t("div",null," • "+s(r(o)("lottery.helpAssist.rewardsList.extraDraw",{count:1})),1),t("div",null,"• "+s(r(o)("lottery.helpAssist.rewardsList.permanent")),1),t("div",null,"• "+s(r(o)("lottery.helpAssist.rewardsList.participate")),1)])]),t("button",{onClick:V,disabled:h.value||!b.value,class:"w-full py-4 bg-gradient-to-r from-green-600 to-blue-600 text-white rounded-lg hover:from-green-700 hover:to-blue-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed text-xl font-bold flex items-center justify-center"},[h.value?(c(),u("svg",Jt,e[12]||(e[12]=[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):g("",!0),a(" "+s(h.value?r(o)("lottery.helpAssist.assisting"):b.value?r(o)("lottery.helpAssist.assist"):r(o)("lottery.helpAssist.cannotAssist")),1)],8,qt),b.value?g("",!0):(c(),u("div",Yt,s(N.value),1))])]),t("div",Gt,[t("div",Kt,[t("h4",Qt,s(r(o)("lottery.helpAssist.rulesTitle")),1),t("ul",Wt,[t("li",Xt,[e[14]||(e[14]=t("span",{class:"w-2 h-2 bg-indigo-400 rounded-full mt-2 mr-3 flex-shrink-0"},null,-1)),a(" 每次助力可获得 "+s(((S=x.value)==null?void 0:S.helpRewardDraws)||1)+" 次额外抽奖机会 ",1)]),t("li",Zt,[e[15]||(e[15]=t("span",{class:"w-2 h-2 bg-indigo-400 rounded-full mt-2 mr-3 flex-shrink-0"},null,-1)),a(" 助力邀请有效期为 "+s(((I=x.value)==null?void 0:I.helpExpireHours)||24)+" 小时 ",1)]),t("li",te,[e[16]||(e[16]=t("span",{class:"w-2 h-2 bg-indigo-400 rounded-full mt-2 mr-3 flex-shrink-0"},null,-1)),a(" 助力抽奖次数上限为 "+s(((L=x.value)==null?void 0:L.helpDrawsLimit)||10)+" 次 ",1)]),e[17]||(e[17]=t("li",{class:"flex items-start"},[t("span",{class:"w-2 h-2 bg-indigo-400 rounded-full mt-2 mr-3 flex-shrink-0"}),a(" 同一IP和设备在短时间内只能助力有限次数 ")],-1)),e[18]||(e[18]=t("li",{class:"flex items-start"},[t("span",{class:"w-2 h-2 bg-indigo-400 rounded-full mt-2 mr-3 flex-shrink-0"}),a(" 助力成功后，邀请人将立即获得额外抽奖次数 ")],-1))]),($=x.value)!=null&&$.helpRuleDesc?(c(),u("div",ee,s(x.value.helpRuleDesc),1)):g("",!0)])])])):g("",!0)],2)}}}),ie=tt(se,[["__scopeId","data-v-828218cc"]]);export{ie as default};
