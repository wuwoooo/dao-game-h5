import{f as j,h as D}from"./game-CibO7eY-.js";import{d as I,r as p,i as y,y as L,o as T,b as R,c as a,e as i,f as e,g as r,j as m,k as f,l as v,q as w,t as d,F as z,p as G,_ as V}from"./index-sn2Iz1lD.js";const $={class:"w-full max-w-full overflow-x-hidden"},B={class:"py-4 px-2 sm:px-4 md:px-6 lg:px-8 sticky top-0 bg-white/90 backdrop-blur-md z-50 shadow-sm w-full"},M={class:"max-w-7xl mx-auto flex items-center justify-between"},F={key:0,class:"flex items-center"},S={class:"pt-4"},q={class:"px-2 sm:px-4 md:px-6 lg:px-8 max-w-7xl mx-auto"},A={class:"flex items-center justify-between mb-8"},E={class:"mb-6 border-b border-gray-200"},H={class:"flex flex-wrap -mb-px"},J={class:"mr-2"},K={class:"mr-2"},O={key:0,class:"text-center py-8"},P={key:1,class:"text-center py-8"},Q={class:"text-red-600"},U={key:2,class:"text-center py-12 bg-white rounded-lg shadow-md"},W={class:"text-gray-600 text-lg mb-4"},X={key:3,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},Y={class:"card-image-container"},Z=["src","alt"],ee={class:"p-4"},te={class:"text-xl font-semibold mb-2"},se={class:"text-gray-600 mb-4 description-truncate"},oe={class:"flex flex-wrap gap-2 mb-4"},le={class:"px-3 py-1 bg-indigo-100 text-indigo-600 text-sm rounded-full"},ae={class:"px-3 py-1 bg-green-100 text-green-600 text-sm rounded-full"},ie={class:"flex justify-between items-center"},ne={class:"text-sm text-gray-500"},re=I({__name:"MyGames",setup(de){const u=p(!0),c=p(""),x=p([]),l=p("clicks"),_=y("openLoginReminder"),C=y("isLoggedIn"),h=y("logout");L(l,()=>{b()});function k(n){l.value=n}function N(n){return n?new Date(n).toLocaleDateString("zh-CN",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"未知"}async function b(){var n,t;u.value=!0,c.value="",x.value=[];try{const o=localStorage.getItem("uid");if(!o){c.value="请先登录",u.value=!1;return}const s={uid:o,current:1,size:100},g=l.value==="clicks"?await j(s):await D(s);g.data.code===0&&g.data.data?x.value=g.data.data.records:c.value=g.data.msg||`获取我的${l.value==="clicks"?"点击":"浏览"}记录失败`}catch(o){c.value=((t=(n=o==null?void 0:o.response)==null?void 0:n.data)==null?void 0:t.msg)||`获取我的${l.value==="clicks"?"点击":"浏览"}记录失败`}finally{u.value=!1}}return T(b),(n,t)=>{const o=R("router-link");return i(),a("div",$,[e("header",B,[e("div",M,[t[7]||(t[7]=e("div",{class:"text-xl sm:text-2xl font-bold text-indigo-600"},[e("i",{class:"fas fa-rocket mr-1"}),r("DaoGame ")],-1)),e("nav",null,[m(C)()?(i(),a("div",F,[f(o,{to:"/",class:"text-slate-600 hover:text-indigo-600 flex items-center mr-4"},{default:v(()=>t[4]||(t[4]=[e("i",{class:"fas fa-home text-xl mr-1"},null,-1),e("span",{class:"text-sm hidden sm:inline"},"首页",-1)])),_:1}),e("button",{onClick:t[0]||(t[0]=(...s)=>m(h)&&m(h)(...s)),class:"text-slate-600 hover:text-indigo-600 flex items-center"},t[5]||(t[5]=[e("i",{class:"fas fa-sign-out-alt text-xl mr-1"},null,-1),e("span",{class:"text-sm hidden sm:inline"},"退出",-1)]))])):(i(),a("button",{key:1,onClick:t[1]||(t[1]=(...s)=>m(_)&&m(_)(...s)),class:"text-slate-600 hover:text-indigo-600 flex items-center"},t[6]||(t[6]=[e("i",{class:"fas fa-user-circle text-xl mr-1"},null,-1),e("span",{class:"text-sm hidden sm:inline"},"登录",-1)])))])])]),e("main",S,[e("div",q,[e("div",A,[t[9]||(t[9]=e("h1",{class:"text-xl sm:text-2xl md:text-3xl font-bold"},"我的游戏",-1)),f(o,{to:"/",class:"bg-indigo-600 text-white px-6 py-2 rounded-lg hover:bg-indigo-700 button-hover-scale flex items-center"},{default:v(()=>t[8]||(t[8]=[e("i",{class:"fas fa-plus mr-2"},null,-1),r(" 浏览更多 ")])),_:1})]),e("div",E,[e("ul",H,[e("li",J,[e("button",{class:w(["inline-block py-4 px-4 text-sm font-medium",l.value==="clicks"?"text-indigo-600 border-b-2 border-indigo-600":"text-gray-500 hover:text-gray-700 border-b-2 border-transparent hover:border-gray-300"]),onClick:t[2]||(t[2]=s=>k("clicks"))},t[10]||(t[10]=[e("i",{class:"fas fa-mouse-pointer mr-2"},null,-1),r("我的点击记录 ")]),2)]),e("li",K,[e("button",{class:w(["inline-block py-4 px-4 text-sm font-medium",l.value==="views"?"text-indigo-600 border-b-2 border-indigo-600":"text-gray-500 hover:text-gray-700 border-b-2 border-transparent hover:border-gray-300"]),onClick:t[3]||(t[3]=s=>k("views"))},t[11]||(t[11]=[e("i",{class:"fas fa-eye mr-2"},null,-1),r("我的浏览记录 ")]),2)])])]),u.value?(i(),a("div",O,t[12]||(t[12]=[e("p",{class:"text-gray-600"},"加载中...",-1)]))):c.value?(i(),a("div",P,[e("p",Q,d(c.value),1),e("button",{onClick:b,class:"mt-4 bg-indigo-600 text-white px-4 py-2 rounded hover:bg-indigo-700"}," 重试 ")])):x.value.length===0?(i(),a("div",U,[t[14]||(t[14]=e("i",{class:"fas fa-gamepad text-5xl text-gray-400 mb-4"},null,-1)),e("p",W,d(l.value==="clicks"?"您还没有点击过任何游戏":"您还没有浏览过任何游戏"),1),f(o,{to:"/",class:"inline-block bg-indigo-600 text-white px-6 py-2 rounded-lg hover:bg-indigo-700 button-hover-scale"},{default:v(()=>t[13]||(t[13]=[r(" 开始探索 ")])),_:1})])):(i(),a("div",X,[(i(!0),a(z,null,G(x.value,s=>(i(),a("div",{key:s.id,class:"bg-white rounded-lg shadow-md overflow-hidden card-hover-shadow"},[e("div",Y,[e("img",{src:s.gameappIcon,alt:s.gameappName,class:"w-full h-full object-cover"},null,8,Z)]),e("div",ee,[e("h3",te,d(s.gameappName),1),e("p",se,d(s.gameappDescription),1),e("div",oe,[e("span",le,d(s.gameappType==="Game"?"游戏":"应用"),1),e("span",ae,d(s.ownerName),1)]),e("div",ie,[e("span",ne,[t[15]||(t[15]=e("i",{class:"fas fa-clock mr-1"},null,-1)),r(" "+d(N(l.value==="clicks"?s.clickTime:s.viewTime)),1)]),f(o,{to:{name:"game-detail",params:{id:s.gameappId}},class:"bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 button-hover-scale flex items-center"},{default:v(()=>t[16]||(t[16]=[e("i",{class:"fas fa-info-circle mr-2"},null,-1),r(" 查看详情 ")])),_:2},1032,["to"])])])]))),128))]))])])])}}}),ue=V(re,[["__scopeId","data-v-7f04d7e9"]]);export{ue as default};
