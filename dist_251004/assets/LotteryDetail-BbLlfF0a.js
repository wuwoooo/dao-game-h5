import{d as Ae,I as Pe,r as x,y as ke,C as G,R as et,a as tt,x as ot,e as i,T as Qe,l as _e,c as d,m as _,G as me,k as ye,f as e,t as l,j as a,S as Re,U as Be,V as lt,W as Se,X as _t,Y as Ct,Z as Dt,$ as Mt,a0 as $t,_ as Ne,J as O,o as st,F as re,g as N,D as pe,p as ue,O as Z,a1 as It,q as V,s as jt,u as Tt,i as Ye,a2 as zt,b as Ht,n as fe,K as Lt,L as Rt,M as Bt,N as He}from"./index-sn2Iz1lD.js";import{b as he,d as Je,e as St,f as Ue,h as Ke,i as Ut,g as At,j as Pt,k as Nt,l as Ft,c as Xe,m as Et,p as Vt,n as Wt}from"./app-WF9V_EMG.js";const Gt="/h5/blindbox1.png",Le="/h5/blindbox3.png",qt="/h5/blindbox2.png",Ot={class:"flex items-center justify-between px-6 py-2 border-b border-gray-100"},Zt={class:"text-lg font-semibold text-gray-900"},Qt={class:"px-6 py-6"},Yt={class:"grid grid-cols-5 gap-4 mb-6"},Jt=["disabled"],Kt=["disabled"],Xt=["disabled"],eo=["disabled"],to={class:"text-xs text-gray-600"},oo=["disabled"],lo={class:"text-xs text-gray-600"},so={class:"space-y-3"},ao={class:"text-left"},no={class:"text-sm font-medium text-gray-700"},ro={class:"flex items-center space-x-3"},io=["value"],co=["disabled"],uo=Ae({__name:"ShareModal",props:{visible:{type:Boolean},shareUrl:{},shareTitle:{default:"分享活动"},shareText:{default:"快来参与这个精彩活动！"},shareImage:{},userInfo:{},isHelpInvite:{type:Boolean}},emits:["close"],setup(xe,{emit:r}){const{t:h}=Pe(),m=xe,X=r,M=x(!1);let n=0,A=!1;function F(){A||(n=window.scrollY,document.body.style.position="fixed",document.body.style.top=`-${n}px`,document.body.style.width="100%",document.body.style.overflow="hidden",document.body.classList.add("scroll-locked"),A=!0)}function y(){A&&(document.body.style.position="",document.body.style.top="",document.body.style.width="",document.body.style.overflow="",document.body.classList.remove("scroll-locked"),window.scrollTo(0,n),A=!1)}ke(()=>m.visible,W=>{W?(F(),setTimeout(()=>{M.value=!0},50)):y()});function P(){M.value=!1,setTimeout(()=>{X("close")},300)}async function ee(){var W;if(!H.value)try{if(console.log("开始复制链接:",$.value),console.log("链接类型:",typeof $.value),console.log("链接长度:",(W=$.value)==null?void 0:W.length),!$.value||$.value==="undefined"||$.value==="null"||$.value==="生成中...")throw new Error(h("lottery.components.shareModal.copyError"));let k=$.value;m.isHelpInvite&&(k=`${Re()}${$.value}`),await Be(k),console.log(h("lottery.components.shareModal.copySuccess")),lt(h)}catch(k){console.error("复制失败:",k),Se(h)}}const K=G(()=>({url:m.shareUrl,title:m.shareTitle,text:m.shareText,image:m.shareImage,userInfo:m.userInfo})),$=x(m.shareUrl),H=x(!1);ke(()=>m.visible,async W=>{if(W&&m.userInfo){const k=`${m.userInfo.uuid}_${m.userInfo.uid}_${btoa(m.shareUrl)}`,se=localStorage.getItem(`shortUrl_${k}`);let te=!1;if(se)try{const Q=JSON.parse(se);Date.now()<Q.expiresAt&&(te=!0,$.value=Q.shortUrl)}catch(Q){console.warn("解析缓存失败:",Q)}if(!te){H.value=!0,$.value="生成中...";try{const Q=await et({uuid:m.userInfo.uuid,token:m.userInfo.token,uid:m.userInfo.uid,oriUrl:m.shareUrl});$.value=Q}catch(Q){console.warn("获取短链失败，使用原始URL:",Q),$.value=m.shareUrl}finally{H.value=!1}}}else W&&($.value=m.shareUrl)},{immediate:!0});const Y=async()=>{H.value||(await _t(K.value),P())},I=async()=>{H.value||(await Ct(K.value),P())},b=async()=>{H.value||(await Dt(K.value),P())},S=async()=>{H.value||(await Mt(K.value),P())},le=async()=>{H.value||(await $t(K.value),P())};return tt(()=>{y()}),(W,k)=>(i(),ot(Qe,{name:"modal","enter-active-class":"transition-all duration-300 ease-out","leave-active-class":"transition-all duration-300 ease-in","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:_e(()=>[W.visible?(i(),d("div",{key:0,class:"fixed inset-0 z-50 flex items-end justify-center bg-black bg-opacity-50 backdrop-blur-sm",onClick:P,onTouchmove:k[1]||(k[1]=me(()=>{},["prevent"]))},[ye(Qe,{name:"panel","enter-active-class":"transition-transform duration-300 ease-out","leave-active-class":"transition-transform duration-300 ease-in","enter-from-class":"translate-y-full","enter-to-class":"translate-y-0","leave-from-class":"translate-y-0","leave-to-class":"translate-y-full"},{default:_e(()=>[M.value?(i(),d("div",{key:0,class:"bg-white rounded-t-3xl w-full max-w-md",onClick:k[0]||(k[0]=me(()=>{},["stop"]))},[k[8]||(k[8]=e("div",{class:"flex justify-center pt-3 pb-2"},[e("div",{class:"w-12 h-1 bg-gray-300 rounded-full"})],-1)),e("div",Ot,[e("h3",Zt,l(a(h)("lottery.components.shareModal.title")),1),e("button",{onClick:P,class:"w-6 h-6 rounded-full bg-gray-200 flex items-center justify-center text-gray-500 hover:text-gray-700 hover:bg-gray-300 transition-colors"},k[2]||(k[2]=[e("svg",{class:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),e("div",Qt,[e("div",Yt,[e("button",{onClick:Y,disabled:H.value,class:"flex flex-col items-center space-y-2 p-3 rounded-xl hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},k[3]||(k[3]=[e("div",{class:"w-12 h-12 bg-blue-600 rounded-full flex items-center justify-center"},[e("svg",{class:"w-6 h-6 text-white",fill:"currentColor",viewBox:"0 0 24 24"},[e("path",{d:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"})])],-1),e("span",{class:"text-xs text-gray-600"},"FaceBook",-1)]),8,Jt),e("button",{onClick:I,disabled:H.value,class:"flex flex-col items-center space-y-2 p-3 rounded-xl hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},k[4]||(k[4]=[e("div",{class:"w-12 h-12 bg-sky-400 rounded-full flex items-center justify-center"},[e("svg",{class:"w-6 h-6 text-white",fill:"currentColor",viewBox:"0 0 24 24"},[e("path",{d:"M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.056 0zm4.962 7.224c.1-.002.321.023.465.14a.506.506 0 0 1 .171.325c.016.093.036.306.02.472-.18 1.898-.962 6.502-1.36 8.627-.168.9-.499 1.201-.82 1.23-.696.065-1.225-.46-1.9-.902-1.056-.693-1.653-1.124-2.678-1.8-1.185-.78-.417-1.21.258-1.91.177-.184 3.247-2.977 3.307-3.23.007-.032.014-.15-.056-.212s-.174-.041-.249-.024c-.106.024-1.793 1.14-5.061 3.345-.48.33-.913.49-1.302.48-.428-.008-1.252-.241-1.865-.44-.752-.245-1.349-.374-1.297-.789.027-.216.325-.437.893-.663 3.498-1.524 5.83-2.529 6.998-3.014 3.332-1.386 4.025-1.627 4.476-1.635z"})])],-1),e("span",{class:"text-xs text-gray-600"},"Telegram",-1)]),8,Kt),e("button",{onClick:b,disabled:H.value,class:"flex flex-col items-center space-y-2 p-3 rounded-xl hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},k[5]||(k[5]=[e("div",{class:"w-12 h-12 bg-black rounded-full flex items-center justify-center"},[e("svg",{class:"w-6 h-6 text-white",fill:"currentColor",viewBox:"0 0 24 24"},[e("path",{d:"M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"})])],-1),e("span",{class:"text-xs text-gray-600"},"Twitter",-1)]),8,Xt),e("button",{onClick:S,disabled:H.value,class:"flex flex-col items-center space-y-2 p-3 rounded-xl hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},[k[6]||(k[6]=e("div",{class:"w-12 h-12 bg-white border-2 border-gray-300 rounded-full flex items-center justify-center"},[e("svg",{class:"w-6 h-6 text-gray-500",fill:"currentColor",viewBox:"0 0 24 24"},[e("path",{d:"M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"})])],-1)),e("span",to,l(a(h)("lottery.components.shareModal.email")),1)],8,eo),e("button",{onClick:le,disabled:H.value,class:"flex flex-col items-center space-y-2 p-3 rounded-xl hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},[k[7]||(k[7]=e("div",{class:"w-12 h-12 bg-green-500 rounded-full flex items-center justify-center"},[e("svg",{class:"w-6 h-6 text-white",fill:"currentColor",viewBox:"0 0 24 24"},[e("path",{d:"M8.5 12.5c0-.8-.7-1.5-1.5-1.5s-1.5.7-1.5 1.5.7 1.5 1.5 1.5 1.5-.7 1.5-1.5zm7 0c0-.8-.7-1.5-1.5-1.5s-1.5.7-1.5 1.5.7 1.5 1.5 1.5 1.5-.7 1.5-1.5zM12 2C6.5 2 2 6.5 2 12s4.5 10 10 10 10-4.5 10-10S17.5 2 12 2zm0 18c-4.4 0-8-3.6-8-8s3.6-8 8-8 8 3.6 8 8-3.6 8-8 8z"})])],-1)),e("span",lo,l(a(h)("lottery.components.shareModal.wechat")),1)],8,oo)]),e("div",so,[e("div",ao,[e("label",no,l(a(h)("lottery.components.shareModal.copyLink")),1)]),e("div",ro,[e("input",{value:$.value,readonly:"",class:"flex-1 px-3 py-2 border border-gray-300 rounded-lg text-sm bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",style:{color:"#000"}},null,8,io),e("button",{onClick:ee,disabled:H.value,class:"px-4 py-2 bg-blue-600 text-white text-sm rounded-lg hover:bg-blue-700 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed"},l(H.value?a(h)("lottery.components.shareModal.generating"):a(h)("lottery.components.shareModal.copy")),9,co)])])])])):_("",!0)]),_:1})],32)):_("",!0)]),_:1}))}}),at=Ne(uo,[["__scopeId","data-v-a43c1478"]]),vo={class:"help-invite bg-white/5 backdrop-blur-sm rounded-xl p-6 mb-8 border border-indigo-500/20"},fo={class:"flex items-center justify-between mb-6"},ho={class:"text-xl font-bold text-white flex items-center"},mo={class:"flex items-center space-x-2 ml-2"},go=["title"],po=["disabled","title"],yo={key:0,class:"w-4 h-4 animate-spin",fill:"none",viewBox:"0 0 24 24"},xo={key:1,class:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},bo={key:0,class:"mb-6"},wo={class:"grid grid-cols-3 gap-4"},ko={class:"text-center"},_o={class:"text-2xl font-bold text-yellow-400"},Co={class:"text-xs text-indigo-300"},Do={class:"text-center"},Mo={class:"text-2xl font-bold text-purple-400"},$o={class:"text-xs text-indigo-300"},Io={class:"text-center"},jo={class:"text-2xl font-bold text-green-400"},To={class:"text-xs text-indigo-300"},zo={key:1,class:"mb-6"},Ho={key:2,class:"mb-6"},Lo={class:"bg-gradient-to-r from-green-900/30 to-blue-900/30 rounded-lg border border-green-500/20 p-4"},Ro={class:"flex items-center justify-between mb-3"},Bo={class:"text-lg font-semibold text-white"},So={class:"space-y-3"},Uo={class:"flex flex-col"},Ao={class:"text-indigo-300 text-sm text-left"},Po={class:"flex items-center space-x-2 mt-2"},No=["value"],Fo=["disabled"],Eo={class:"mt-4 space-y-3"},Vo={key:3,class:"mb-6"},Wo={class:"text-lg font-semibold text-white mb-4 flex items-center"},Go={class:"space-y-2"},qo={class:"flex items-center space-x-3"},Oo={class:"text-white text-sm font-medium"},Zo={class:"text-indigo-300 text-xs"},Qo={class:"text-right"},Yo={class:"text-yellow-400 text-sm font-medium"},Jo={class:"flex items-center justify-between mb-4"},Ko={class:"text-lg font-bold text-white flex items-center"},Xo={class:"flex-1 overflow-y-auto space-y-3 pr-2"},el={key:0,class:"flex items-center justify-center py-8"},tl={class:"flex items-center space-x-3 text-indigo-300"},ol={class:"flex items-center space-x-4 flex-1"},ll={class:"w-10 h-10 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-full flex items-center justify-center flex-shrink-0"},sl={class:"text-white text-base font-medium"},al={class:"text-left flex-1 min-w-0"},nl={class:"text-white text-base font-medium text-left truncate"},rl={class:"text-indigo-300 text-sm text-left"},il={key:2,class:"flex items-center justify-center py-8"},dl={class:"text-center text-indigo-300"},cl={class:"text-lg font-medium"},ul={class:"text-sm"},vl={class:"mt-4 flex justify-end"},fl={class:"flex items-center justify-between mb-4"},hl={class:"text-lg font-bold text-white flex items-center"},ml={class:"space-y-3"},gl={class:"text-indigo-200 text-sm"},pl={class:"mb-2"},yl={class:"space-y-1"},xl={class:"flex items-start"},bl={class:"text-green-400 font-semibold"},wl={class:"flex items-start"},kl={class:"text-purple-400 font-semibold"},_l={key:0,class:"mt-4 p-3 bg-indigo-800/30 rounded-lg border border-indigo-500/20"},Cl={class:"text-indigo-200 text-xs"},Dl={class:"mt-6 flex justify-end"},Ml=Ae({__name:"HelpInvite",props:{lotteryId:{},activityId:{},autoCreate:{type:Boolean}},emits:["invite-created"],setup(xe,{emit:r}){const{t:h}=Pe(),m=xe,X=r,M=x(null),n=x(null),A=x([]),F=x([]),y=x(null),P=x(!1),ee=x(!1),K=x(!1),$=x(!1),H=x(!1),Y=x(!1),I=x(""),b=x(!1),S=G(()=>{const v=O();if(v&&v.uuid&&v.token&&v.uid)return{uuid:v.uuid,token:v.token,uid:v.uid}}),le=G(()=>{var v;return((v=M.value)==null?void 0:v.inviteUrl)||""}),W=G(()=>"邀请您助力抽奖"),k=G(()=>"点击链接为我助力，获得额外抽奖机会！");function se(v){return v?v.length>12?v.substring(0,12)+"...":v:"未知用户"}G(()=>A.value.slice(0,3)),G(()=>A.value.length>3);const te=x(!1),Q=G(()=>F.value.slice(0,10));ke(()=>{var v;return(v=M.value)==null?void 0:v.inviteUrl},async v=>{if(v&&S.value){const s=`${S.value.uuid}_${S.value.uid}_${btoa(v)}`,C=localStorage.getItem(`shortUrl_${s}`);let j=!1;if(C)try{const g=JSON.parse(C);Date.now()<g.expiresAt&&(j=!0,I.value=g.shortUrl)}catch(g){console.warn("解析邀请链接缓存失败:",g)}if(!j){b.value=!0,I.value=h("lottery.components.shareModal.generating")+"...";try{const g=await et({uuid:S.value.uuid,token:S.value.token,uid:S.value.uid,oriUrl:v});I.value=g}catch(g){console.warn("获取邀请短链失败，使用原始URL:",g),I.value=v}finally{b.value=!1}}}else v?I.value=v:I.value=""},{immediate:!0});async function be(){var v,s,C;if(console.log("createInvite 函数开始执行"),console.log("checking.value:",ee.value),ee.value){console.log("正在检查中，跳过本次创建");return}console.log("开始创建助力邀请");try{const j=O();if(console.log("获取用户信息:",j),!(j!=null&&j.uid)){if(m.autoCreate){console.log("自动创建邀请时用户未登录，跳过创建");return}Z.error("请先登录");return}let g;const T="https://t-www.aisky.io/";T&&(g=`${T}pages/lottery/index?page=h5/lottery/${m.lotteryId}&helpcode={code}`),console.log("创建邀请参数:",{lotteryId:m.lotteryId,inviterUid:j.uid,inviteUrl:g,activityId:m.activityId}),console.log("开始调用 createHelpInvite API");const z=await Ut(m.lotteryId,j.uid,g);console.log("createHelpInvite API 响应:",z),((v=z.data)==null?void 0:v.code)===0?(M.value=z.data.data,console.log("创建成功，后端返回的邀请信息:",M.value),await de(),X("invite-created",z.data.data)):m.autoCreate?console.log("自动创建邀请失败:",((s=z.data)==null?void 0:s.msg)||"创建邀请失败"):Z.error(((C=z.data)==null?void 0:C.msg)||"创建邀请失败")}catch(j){console.error("创建邀请失败:",j),m.autoCreate?console.log("自动创建邀请网络错误，跳过创建"):Z.error("网络错误，请稍后再试")}finally{K.value=!1}}async function Ce(){var v,s;if(!P.value){P.value=!0;try{const C=O();if(!(C!=null&&C.uid))return;const j=await he(m.lotteryId,C.uid);((v=j.data)==null?void 0:v.code)===0&&(n.value=j.data.data);const g=await Je(m.lotteryId,10);if(((s=g.data)==null?void 0:s.code)===0&&(F.value=g.data.data||[],F.value.sort((T,z)=>(z.totalHelpDraws||0)-(T.totalHelpDraws||0)),F.value.length>0)){const T=F.value.map(z=>z.uid).filter(z=>z);if(T.length>0){const z=await ge(T);F.value.forEach(oe=>{oe.uid&&z[oe.uid]&&(oe.userName=z[oe.uid])})}}}catch(C){console.error(h("lottery.components.helpInvite.refreshError"),C)}finally{P.value=!1}}}async function ie(){var v;if(!$.value){$.value=!0,te.value=!0;try{const s=O();if(!(s!=null&&s.uid)){$.value=!1;return}const C=await St(m.lotteryId,s.uid);if(((v=C.data)==null?void 0:v.code)===0&&(A.value=C.data.data||[],A.value.length>0)){const j=A.value.map(g=>g.helperUid).filter(g=>g);if(j.length>0){const g=await ge(j);A.value.forEach(T=>{T.helperUid&&g[T.helperUid]&&(T.helperName=g[T.helperUid])})}}}catch(s){console.error("获取助力记录失败:",s)}finally{$.value=!1}}}async function J(){if(!b.value){if(!I.value||I.value===h("lottery.components.shareModal.generating")+"..."){Z.error(h("lottery.components.helpInvite.inviteLinkNotReady"),void 0,h);return}try{const s=`${Re()}${I.value}`;await Be(s),lt(h)}catch(v){console.error("复制邀请链接失败:",v),Se(h)}}}async function De(){if(!b.value){if(!I.value||I.value===h("lottery.components.shareModal.generating")+"..."){Z.error(h("lottery.components.helpInvite.inviteLinkNotReady"),void 0,h);return}try{const s=`${Re()}${I.value}`;await Be(s)}catch(v){console.error("复制邀请链接失败:",v),Se(h);return}Me()}}function Me(){var v;(v=M.value)!=null&&v.inviteUrl?H.value=!0:Z.warning("请先创建邀请链接")}function $e(){H.value=!1}async function ge(v){if(!v.length)return{};try{const s=v.join(","),C=await It(s);if(C.data&&C.data.status===200&&C.data.attachment)return C.data.attachment}catch(s){console.error("获取用户昵称失败:",s)}return{}}async function de(){var v,s,C,j;try{const g=O();if(!(g!=null&&g.uid))return;const T=await Ue(m.lotteryId);if(((v=T.data)==null?void 0:v.code)===0&&(y.value=T.data.data),M.value){const L=await Ke(m.lotteryId,g.uid);((s=L.data)==null?void 0:s.code)===0&&(M.value=L.data.data)}const z=await he(m.lotteryId,g.uid);((C=z.data)==null?void 0:C.code)===0&&(n.value=z.data.data);const oe=await Je(m.lotteryId,10);if(((j=oe.data)==null?void 0:j.code)===0&&(F.value=oe.data.data||[],F.value.sort((L,U)=>(U.totalHelpDraws||0)-(L.totalHelpDraws||0)),F.value.length>0)){const L=F.value.map(U=>U.uid).filter(U=>U);if(L.length>0){const U=await ge(L);F.value.forEach(ve=>{ve.uid&&U[ve.uid]&&(ve.userName=U[ve.uid])})}}}catch(g){console.error("获取助力数据失败:",g)}}async function we(){var v,s,C,j;if(!ee.value){ee.value=!0;try{const g=O();if(!(g!=null&&g.uid))return;const T=await Ue(m.lotteryId);((v=T.data)==null?void 0:v.code)===0&&(y.value=T.data.data);const z=await Ke(m.lotteryId,g.uid);((s=z.data)==null?void 0:s.code)===0&&z.data.data?(M.value=z.data.data,await de()):(console.log("没有现有邀请，检查自动创建条件"),console.log("autoCreate:",m.autoCreate),console.log("helpConfig:",y.value),console.log("helpEnabled:",(C=y.value)==null?void 0:C.helpEnabled),await de(),m.autoCreate&&((j=y.value)!=null&&j.helpEnabled)?(console.log("满足自动创建条件，开始创建助力邀请"),K.value=!0,ee.value=!1,await be(),K.value=!1):console.log("不满足自动创建条件，跳过创建"))}catch(g){console.error("检查邀请失败:",g)}finally{ee.value=!1}}}function Ie(v){if(!v)return"";const s=new Date(v);return`${s.getFullYear()}-${(s.getMonth()+1).toString().padStart(2,"0")}-${s.getDate().toString().padStart(2,"0")} ${s.getHours().toString().padStart(2,"0")}:${s.getMinutes().toString().padStart(2,"0")}`}return st(()=>{we()}),ke(()=>m.lotteryId,()=>{M.value=null,n.value=null,A.value=[],F.value=[],y.value=null,we()}),(v,s)=>{var C,j,g,T,z,oe;return i(),d(re,null,[e("div",vo,[e("div",fo,[e("h3",ho,[s[12]||(s[12]=e("svg",{class:"w-5 h-5 mr-2 text-indigo-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})],-1)),N(" "+l(a(h)("lottery.components.helpInvite.title"))+" ",1),e("div",mo,[e("button",{onClick:s[0]||(s[0]=L=>Y.value=!0),class:"w-7 h-7 bg-indigo-500/30 hover:bg-indigo-500/50 rounded-full flex items-center justify-center text-indigo-200 hover:text-white transition-all cursor-pointer",title:a(h)("lottery.components.helpInvite.rulesTooltip")},s[9]||(s[9]=[e("svg",{class:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)]),8,go),e("button",{onClick:Ce,disabled:P.value,class:"w-7 h-7 bg-indigo-500/30 hover:bg-indigo-500/50 rounded-full flex items-center justify-center text-indigo-200 hover:text-white transition-all cursor-pointer disabled:opacity-50",title:a(h)("lottery.components.helpInvite.refreshTooltip")},[P.value?(i(),d("svg",yo,s[10]||(s[10]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):(i(),d("svg",xo,s[11]||(s[11]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1)])))],8,po)])])]),n.value?(i(),d("div",bo,[e("div",wo,[e("div",ko,[e("div",_o,l(n.value.totalHelpDraws||0),1),e("div",Co,l(a(h)("lottery.components.helpInvite.totalAssists")),1)]),e("div",Do,[e("div",Mo,l(n.value.usedHelpDraws||0),1),e("div",$o,l(a(h)("lottery.components.helpInvite.usedAssists")),1)]),e("div",Io,[e("div",jo,l((((C=M.value)==null?void 0:C.maxHelpCount)||0)-(((j=M.value)==null?void 0:j.helpCount)||0)),1),e("div",To,l(a(h)("lottery.components.helpInvite.availableAssists")),1)])])])):_("",!0),!M.value&&K.value?(i(),d("div",zo,s[13]||(s[13]=[pe('<div class="text-center p-4 bg-gradient-to-r from-blue-900/30 to-indigo-900/30 rounded-lg border border-blue-500/20" data-v-76dde841><div class="flex items-center justify-center mb-2" data-v-76dde841><svg class="w-5 h-5 mr-2 text-blue-400 animate-spin" fill="none" viewBox="0 0 24 24" stroke="currentColor" data-v-76dde841><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4" data-v-76dde841></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z" data-v-76dde841></path></svg><span class="text-blue-300 text-sm" data-v-76dde841>正在自动创建助力邀请...</span></div></div>',1)]))):_("",!0),M.value?(i(),d("div",Ho,[e("div",Lo,[e("div",Ro,[e("h4",Bo,l(a(h)("lottery.components.helpInvite.myInvite")),1)]),e("div",So,[e("div",Uo,[e("span",Ao,l(a(h)("lottery.components.helpInvite.inviteLink"))+":",1),e("div",Po,[e("input",{value:I.value,readonly:"",class:"px-3 py-1 bg-indigo-900/50 text-indigo-200 text-sm rounded flex-1 min-w-0 max-w-48"},null,8,No),e("button",{onClick:J,disabled:b.value,class:"px-2 py-1 bg-indigo-600/50 hover:bg-indigo-600/70 text-indigo-200 text-xs rounded transition-all disabled:opacity-50 disabled:cursor-not-allowed"},l(b.value?a(h)("lottery.components.shareModal.generating"):a(h)("lottery.components.shareModal.copy")),9,Fo)])])]),e("div",Eo,[e("button",{onClick:De,class:"w-full py-2 bg-gradient-to-r from-green-600 to-blue-600 text-white rounded-lg hover:from-green-700 hover:to-blue-700 transition-all flex items-center justify-center"},[s[14]||(s[14]=e("svg",{class:"w-4 h-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z"})],-1)),N(" "+l(a(h)("lottery.components.helpInvite.shareInvite")),1)]),e("button",{onClick:ie,class:"w-full py-2 bg-indigo-600/50 hover:bg-indigo-600/70 text-indigo-200 rounded-lg transition-all flex items-center justify-center"},[s[15]||(s[15]=e("svg",{class:"w-4 h-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})],-1)),N(" "+l(a(h)("lottery.components.helpInvite.viewRecords")),1)])])])])):_("",!0),Q.value.length>0?(i(),d("div",Vo,[e("h4",Wo,[s[16]||(s[16]=e("svg",{class:"w-5 h-5 mr-2 text-indigo-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})],-1)),N(" "+l(a(h)("lottery.components.helpInvite.popularityKing")),1)]),e("div",Go,[(i(!0),d(re,null,ue(Q.value,(L,U)=>(i(),d("div",{key:L.id,class:"flex items-center justify-between p-3 bg-indigo-900/20 rounded-lg border border-indigo-500/20"},[e("div",qo,[e("div",{class:V(["w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold",{"bg-yellow-500 text-yellow-900":U===0,"bg-gray-400 text-gray-900":U===1,"bg-orange-500 text-orange-900":U===2,"bg-indigo-500 text-white":U>2}])},l(U+1),3),e("div",null,[e("div",Oo,l(se(L.userName)),1),e("div",Zo,l(L.lotteryName),1)])]),e("div",Qo,[e("div",Yo,l(L.totalHelpDraws)+" "+l(a(h)("lottery.components.helpInvite.times")),1)])]))),128))])])):_("",!0)]),ye(at,{visible:H.value,"share-url":le.value,"share-title":W.value,"share-text":k.value,"user-info":S.value,"is-help-invite":!0,onClose:$e},null,8,["visible","share-url","share-title","share-text","user-info"]),te.value?(i(),d("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm",onClick:s[4]||(s[4]=L=>te.value=!1)},[e("div",{class:"bg-gradient-to-br from-indigo-900/95 to-purple-900/95 backdrop-blur-sm rounded-xl p-6 w-[90vw] max-w-4xl mx-4 border border-indigo-500/30 max-h-[80vh] overflow-hidden flex flex-col",onClick:s[3]||(s[3]=me(()=>{},["stop"]))},[e("div",Jo,[e("h3",Ko,[s[17]||(s[17]=e("svg",{class:"w-5 h-5 mr-2 text-indigo-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})],-1)),N(" "+l(a(h)("lottery.components.helpInvite.allHelpRecords"))+" ("+l(A.value.length)+") ",1)]),e("button",{onClick:s[1]||(s[1]=L=>te.value=!1),class:"text-indigo-300 hover:text-white transition-colors"},s[18]||(s[18]=[e("svg",{class:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),e("div",Xo,[$.value?(i(),d("div",el,[e("div",tl,[s[19]||(s[19]=e("svg",{class:"w-6 h-6 animate-spin",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)),e("span",null,l(a(h)("lottery.components.helpInvite.loadingRecords")),1)])])):A.value.length>0?(i(!0),d(re,{key:1},ue(A.value,L=>{var U;return i(),d("div",{key:L.id,class:"flex items-center justify-between p-4 bg-indigo-900/20 rounded-lg border border-indigo-500/20"},[e("div",ol,[e("div",ll,[e("span",sl,l(((U=L.helperName)==null?void 0:U.charAt(0))||"?"),1)]),e("div",al,[e("div",nl,l(se(L.helperName)),1),e("div",rl,l(Ie(L.helpTime)),1)])]),s[20]||(s[20]=e("div",{class:"text-right flex-shrink-0 ml-4"},[e("div",{class:"text-green-400 text-sm font-medium"})],-1))])}),128)):!$.value&&A.value.length===0?(i(),d("div",il,[e("div",dl,[s[21]||(s[21]=e("svg",{class:"w-12 h-12 mx-auto mb-3 text-indigo-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})],-1)),e("p",cl,l(a(h)("lottery.components.helpInvite.noHelpRecords")),1),e("p",ul,l(a(h)("lottery.components.helpInvite.noRecords")),1)])])):_("",!0)]),e("div",vl,[e("button",{onClick:s[2]||(s[2]=L=>te.value=!1),class:"px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg transition-colors"},l(a(h)("lottery.components.shareModal.cancel")),1)])])])):_("",!0),Y.value?(i(),d("div",{key:1,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm",onClick:s[8]||(s[8]=L=>Y.value=!1)},[e("div",{class:"bg-gradient-to-br from-indigo-900/95 to-purple-900/95 backdrop-blur-sm rounded-xl p-6 max-w-md mx-4 border border-indigo-500/30",onClick:s[7]||(s[7]=me(()=>{},["stop"]))},[e("div",fl,[e("h3",hl,[s[22]||(s[22]=e("svg",{class:"w-5 h-5 mr-2 text-indigo-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),N(" "+l(a(h)("lottery.components.helpInvite.rulesTitle")),1)]),e("button",{onClick:s[5]||(s[5]=L=>Y.value=!1),class:"text-indigo-300 hover:text-white transition-colors"},s[23]||(s[23]=[e("svg",{class:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),e("div",ml,[e("div",gl,[e("p",pl,l(a(h)("lottery.components.helpInvite.rulesDesc")),1),e("ul",yl,[e("li",xl,[s[26]||(s[26]=e("span",{class:"text-indigo-400 mr-2"},"•",-1)),e("span",null,[s[24]||(s[24]=N("每次助力可获得 ")),e("span",bl,l(((g=y.value)==null?void 0:g.helpRewardDraws)||1),1),s[25]||(s[25]=N(" 次额外抽奖机会"))])]),s[30]||(s[30]=e("li",{class:"flex items-start"},[e("span",{class:"text-indigo-400 mr-2"},"•"),e("span",null,"助力邀请永不过期，可长期使用")],-1)),e("li",wl,[s[29]||(s[29]=e("span",{class:"text-indigo-400 mr-2"},"•",-1)),e("span",null,[s[27]||(s[27]=N("助力抽奖次数上限为 ")),e("span",kl,l(((T=y.value)==null?void 0:T.helpLimit)||((z=M.value)==null?void 0:z.maxHelpCount)||5),1),s[28]||(s[28]=N(" 次"))])]),s[31]||(s[31]=e("li",{class:"flex items-start"},[e("span",{class:"text-indigo-400 mr-2"},"•"),e("span",null,"同一IP和设备在短时间内只能助力有限次数")],-1))])]),(oe=y.value)!=null&&oe.helpRuleDesc?(i(),d("div",_l,[e("p",Cl,l(y.value.helpRuleDesc),1)])):_("",!0)]),e("div",Dl,[e("button",{onClick:s[6]||(s[6]=L=>Y.value=!1),class:"px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg transition-colors"}," 我知道了 ")])])])):_("",!0)],64)}}}),$l=Ne(Ml,[["__scopeId","data-v-76dde841"]]),Il={class:"stars-container absolute inset-0 z-0 overflow-hidden"},jl={class:"sticky top-0 z-30 backdrop-blur-md bg-[#0f172a]/70 border-b border-indigo-500/20 w-full"},Tl={class:"max-w-7xl mx-auto px-2 sm:px-4 py-4 flex justify-between items-center"},zl={class:"flex items-center"},Hl={class:"text-lg sm:text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-purple-300 to-indigo-300"},Ll={class:"flex space-x-3"},Rl={key:0,class:"max-w-7xl mx-auto px-2 sm:px-4 py-24 z-10 relative"},Bl={class:"bg-red-900/20 backdrop-blur-sm border border-red-500/20 rounded-lg p-6 text-center max-w-md mx-auto"},Sl={class:"text-xl font-bold text-red-200 mb-2"},Ul={class:"text-red-300 mb-4"},Al={class:"flex justify-center space-x-4"},Pl={key:1,class:"flex justify-center items-center min-h-[70vh] z-10 relative"},Nl={class:"cosmos-loader text-center"},Fl={class:"text-indigo-300 mt-4 animate-pulse"},El={key:2,class:"flex flex-col items-center justify-center min-h-[70vh] z-10 relative"},Vl={class:"text-2xl text-indigo-200 mb-4"},Wl={class:"text-indigo-300/70 mb-6"},Gl={key:3,class:"max-w-7xl mx-auto px-2 sm:px-4 py-8"},ql={key:0,class:"wheel-container mb-10"},Ol={class:"max-w-lg mx-auto"},Zl={class:"relative mx-auto max-w-md"},Ql={class:"relative"},Yl={class:"w-full relative aspect-square overflow-hidden rounded-full bg-gradient-to-b from-slate-900 to-gray-900 p-3 border border-indigo-500/30 shadow-[0_0_15px_rgba(139,92,246,0.3)]"},Jl={class:"absolute inset-3 z-10"},Kl=["d","fill"],Xl=["x2","y2"],es=["href","x","y"],ts=["id","d"],os={fill:"white","font-size":"4","font-weight":"bold",class:"wheel-prize-text"},ls=["href"],ss={class:"absolute inset-0 flex items-center justify-center z-20 pointer-events-none"},as={class:"absolute inset-1 rounded-full flex items-center justify-center shadow-inner",style:{background:`linear-gradient(
                          135deg,
                          #e55a52 0%,
                          #d63384 100%
                        )`}},ns={class:"w-16 h-16 bg-white rounded-full flex items-center justify-center shadow-inner"},rs=["disabled"],is={class:"mt-8 space-y-2"},ds={key:0,class:"relative inline-block mx-auto"},cs={class:"bg-white/5 backdrop-blur-sm p-3 rounded-lg"},us={class:"grid grid-cols-3 gap-4"},vs={class:"flex flex-col items-center"},fs={class:"text-xs text-indigo-300 mb-1"},hs={class:"text-xl font-bold text-white"},ms={class:"flex flex-col items-center"},gs={class:"text-xs text-indigo-300 mb-1"},ps={class:"text-xl font-bold text-white"},ys={class:"flex flex-col items-center"},xs={class:"text-xs text-indigo-300 mb-1"},bs={class:"text-xl font-bold text-green-400"},ws=["disabled","title"],ks={key:1},_s={key:2,class:"mt-4 relative z-10"},Cs={key:1,class:"box-container mb-10"},Ds={class:"max-w-lg mx-auto"},Ms={class:"text-center mb-6 text-indigo-200 text-lg"},$s={class:"relative"},Is={class:"flex flex-wrap justify-center gap-6"},js=["alt"],Ts={class:"relative z-10 text-center"},zs={class:"text-white font-bold text-xl mb-2 drop-shadow-lg"},Hs={class:"text-white/80 text-sm"},Ls={class:"absolute inset-0 pointer-events-none"},Rs={key:1,class:"absolute inset-0 backface-hidden rounded-lg shadow-2xl flex items-center justify-center border border-indigo-500/30 overflow-hidden animate-box-opening"},Bs={class:"absolute inset-0 pointer-events-none"},Ss={key:2,class:"absolute inset-0 backface-hidden rounded-lg shadow-2xl flex items-center justify-center border border-yellow-300/30 overflow-hidden"},Us=["alt"],As={key:0,class:"absolute inset-0 pointer-events-none"},Ps={class:"mt-8 space-y-2"},Ns={key:0,class:"relative inline-block mx-auto"},Fs={class:"bg-white/5 backdrop-blur-sm p-3 rounded-lg"},Es={class:"grid grid-cols-3 gap-4"},Vs={class:"flex flex-col items-center"},Ws={class:"text-xs text-indigo-300 mb-1"},Gs={class:"text-xl font-bold text-white"},qs={class:"flex flex-col items-center"},Os={class:"text-xs text-indigo-300 mb-1"},Zs={class:"text-xl font-bold text-white"},Qs={class:"flex flex-col items-center"},Ys={class:"text-xs text-indigo-300 mb-1"},Js={class:"text-xl font-bold text-green-400"},Ks=["disabled","title"],Xs={key:1},ea={key:2,class:"mt-4"},ta={key:2,class:"mb-8 text-center"},oa={class:"flex items-center space-x-3"},la={class:"text-left"},sa={class:"text-lg font-semibold text-white group-hover:text-indigo-200 transition-colors"},aa={class:"relative mb-10 overflow-hidden rounded-xl"},na={class:"relative z-[2] p-6 md:p-8 flex flex-col md:flex-row items-center backdrop-blur-md bg-white/10 border border-white/20 rounded-xl shadow-lg ring-1 ring-white/10 transition-all"},ra=["src"],ia={class:"flex-1 text-center md:text-left text-white"},da={class:"text-3xl md:text-4xl font-bold mb-2"},ca={class:"mb-2 flex flex-wrap justify-center md:justify-start gap-2"},ua={class:"text-xs px-3 py-1 rounded-full bg-indigo-600"},va={class:"text-xs px-3 py-1 rounded-full bg-purple-600"},fa={class:"opacity-80 mb-4"},ha={class:"opacity-60 text-sm"},ma={key:0},ga={key:0},pa={key:3,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-70"},ya={class:"bg-gradient-to-br from-indigo-700 to-purple-800 rounded-xl p-6 w-full max-w-md mx-4 shadow-2xl transform transition-all animate-bounce-in border border-indigo-500/40"},xa={class:"text-center"},ba={class:"text-2xl font-bold text-white mb-3"},wa={key:0,class:"bg-white bg-opacity-10 rounded-lg p-4 mb-6 border border-indigo-500/30"},ka={class:"text-lg font-bold text-white"},_a={class:"text-sm text-white opacity-80"},Ca={key:1,class:"text-white opacity-80 mb-6"},Da={class:"text-sm text-white opacity-80 mb-4"},Ma={class:"text-green-300"},$a={class:"flex justify-center space-x-3"},Ia={class:"flex justify-between items-center mb-6"},ja={class:"text-2xl font-bold text-white"},Ta={class:"text-center mb-6"},za={class:"text-indigo-300 text-sm"},Ha={class:"space-y-4"},La={key:0,class:"text-center"},Ra={class:"prize-list bg-white bg-opacity-5 backdrop-blur-sm rounded-xl p-6 mb-10"},Ba={class:"text-2xl font-bold text-white mb-6 flex items-center"},Sa={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6"},Ua={class:"relative h-36 overflow-hidden"},Aa={key:0,class:"w-full h-full flex items-center justify-center bg-gradient-to-br from-gray-600 to-gray-800"},Pa={class:"text-center text-white"},Na={class:"text-sm opacity-80"},Fa=["src"],Ea={class:"absolute top-0 right-0 m-2 px-2 py-1 text-xs font-semibold rounded-full bg-purple-900/80 text-white"},Va={class:"p-4"},Wa={class:"flex justify-between items-start mb-3"},Ga={class:"text-lg font-bold text-white"},qa={class:"flex items-center bg-indigo-900/50 rounded px-2 py-1"},Oa={class:"text-xs text-indigo-300"},Za={class:"flex justify-between items-center mt-2 text-sm"},Qa={class:"flex items-center text-indigo-300"},Ya={key:0,class:"w-4 h-4",viewBox:"0 0 24 24",fill:"currentColor"},Ja={key:1,class:"w-4 h-4",viewBox:"0 0 24 24",fill:"currentColor"},Ka={key:2,class:"w-4 h-4",viewBox:"0 0 24 24",fill:"currentColor"},Xa={key:3,class:"w-4 h-4",viewBox:"0 0 24 24",fill:"currentColor"},en={key:4,class:"w-4 h-4",viewBox:"0 0 24 24",fill:"currentColor"},tn={class:"text-indigo-300"},on={key:4,class:"fixed right-0 top-3/4 transform -translate-y-1/2 z-40"},ln={class:"flex flex-col items-center justify-center h-full px-2 py-1",style:{"font-family":"system-ui, Avenir, Helvetica, Arial, sans-serif"}},sn={class:"flex items-center space-x-1 mb-0.5"},an={class:"text-sm font-medium",style:{"font-family":"inherit"}},nn=Ae({__name:"LotteryDetail",setup(xe){const{t:r}=Pe(),h=jt(),m=Tt(),X=Ye("openLoginReminder"),M=Ye("isLoggedIn"),n=x(null),A=x(!0),F=x(""),y=x(!1),P=x(!1),ee=x(null),K=x(null),$=x(0);x(!1);const H=x("initial"),Y=x(!1),I=x({win:!1,prize:null,remainingDraws:0,remainingDrawsToday:0}),b=zt({remainingDraws:0,remainingDrawsToday:0}),S=x(0),le=x(0),W=x(null),k=x(!1),se=x(!1),te=x(!1),Q=x(null),be=G(()=>{const o=O();if(o&&o.uuid&&o.token&&o.uid)return{uuid:o.uuid,token:o.token,uid:o.uid}}),Ce=G(()=>At()),ie=G(()=>M()&&(b.remainingDraws>0||b.remainingDrawsToday>0)),J=G(()=>!n.value||!n.value.prizes||n.value.prizes.length===0?0:360/n.value.prizes.length),De=G(()=>{var t;if(!((t=n.value)!=null&&t.id))return console.warn("Lottery ID is undefined, using fallback URL"),window.location.origin+"/h5/lottery/";const o="https://t-www.aisky.io/";{const f=`${o}pages/lottery/index?page=h5/lottery/${n.value.id}`;return console.log("Generated share URL:",f),f}}),Me=G(()=>{var o;return((o=n.value)==null?void 0:o.name)||"精彩抽奖活动"}),$e=G(()=>{var o;return((o=n.value)==null?void 0:o.description)||"快来参与这个精彩的抽奖活动，赢取丰厚奖品！"}),ge=G(()=>{var o,t;return((o=n.value)==null?void 0:o.icon)||((t=n.value)==null?void 0:t.background)}),de=G(()=>h.query.direct==="1"?{to:"/lottery",text:"返回抽奖列表"}:{to:"/",text:"返回星际港"});function we(){h.query.direct==="1"?m.push("/lottery"):m.back()}async function Ie(o){uni.navigateTo({url:"/pages/activity/details/index?activityId="+o})}async function v(){const o=Lt(),{uid:t,uuid:f,token:c}=o;if(t&&f&&c)try{console.log("检测到URL参数，清除现有缓存并执行自动登录...",{uid:t,uuid:f,token:c}),Rt(),console.log("已清除现有用户缓存");const u=await Bt({uid:t,uuid:f,token:c});if(u.data&&u.data.status===200&&u.data.attachment){const p=u.data.attachment;console.log("获取用户信息成功:",p),He({uuid:p.uuid,token:c,uid:p.uid,openName:p.openName||"用户"}),console.log("用户信息已保存到本地缓存")}else console.error("获取用户信息失败:",u.data)}catch(u){console.error("调用用户信息接口失败:",u)}}async function s(){const o=h.query.help,t=h.query.helpcode;if(t){console.log("检测到helpcode参数:",t),await C(t);const f={...h.query};delete f.helpcode,m.replace({query:f});return}if(o){console.log("检测到help参数:",o),o==="ok"?Z.success("助力成功！",void 0,r):Z.info(o,void 0,r);const f={...h.query};delete f.help,m.replace({query:f})}}async function C(o){var t,f,c,u,p,R;try{console.log("开始执行助力操作，helpcode:",o);const B=O();if(!(B!=null&&B.uid)){console.log("用户未登录，弹出登录提醒"),X("您还没有登录，请登录后再助力好友",!0);return}const q=await Pt(o,B.uid);if(console.log("助力API响应:",q),((t=q.data)==null?void 0:t.code)===0){if(Z.success("助力成功！",void 0,r),(f=n.value)!=null&&f.id)try{const D=await he(n.value.id,B.uid);((c=D.data)==null?void 0:c.code)===0&&(S.value=((u=D.data.data)==null?void 0:u.remainingHelpDraws)||0,le.value=((p=D.data.data)==null?void 0:p.totalHelpDraws)||0,console.log("助力统计已刷新:",S.value),console.log("获得助力次数已刷新:",le.value))}catch(D){console.error("刷新助力统计失败:",D)}}else{const D=((R=q.data)==null?void 0:R.msg)||"助力失败，请重试";Z.info(D)}}catch(B){console.error("助力操作失败:",B),Z.info("网络错误，请稍后再试",void 0,r)}}async function j(){var t,f,c,u,p,R,B,q;const o=O();if(o&&o.uuid&&o.token&&o.uid)try{console.log("开始校验用户信息...",{uuid:o.uuid,uid:o.uid});const D=await Nt(o.uuid,o.token,o.uid);if(D.data&&D.data.status===200){console.log("用户信息校验成功:",D.data.attachment);const ae=D.data.attachment;return He({uuid:ae.uuid,token:o.token,uid:ae.uid,openName:ae.openName||o.openName}),!0}else return console.warn("用户信息校验失败:",D.data),!1}catch(D){return console.error("用户信息校验异常:",D),(((f=(t=D.response)==null?void 0:t.data)==null?void 0:f.status)===9999||(p=(u=(c=D.response)==null?void 0:c.data)==null?void 0:u.message)!=null&&p.includes("token")||(q=(B=(R=D.response)==null?void 0:R.data)==null?void 0:B.message)!=null&&q.includes("Token"))&&console.log("检测到Token错误，需要重新登录"),!1}return!0}function g(o){if(!o)return!1;try{const t=new URL(o);return t.protocol==="http:"||t.protocol==="https:"}catch{return!1}}function T(o){return!o||!g(o)?"https://img.aisky.io/api/aQAdzWGNitaaleNn.png":o}async function z(){var o,t,f;try{if(Q.value)return Q.value;let c;if((o=n.value)!=null&&o.activityId){const u=O();if(!u||!u.uid||!u.uuid||!u.token)throw new Error("用户信息不完整，无法获取聊天室ID");const p=await Et(u.uuid,u.token,u.uid,n.value.activityId);if(p.data&&p.data.status===200&&((f=(t=p.data.attachment)==null?void 0:t.activity)!=null&&f.chatroomId))c=p.data.attachment.activity.chatroomId.toString();else{console.log("第三方接口返回的chatroomId为空，使用默认聊天室ID");const R="room_58c8f97820ff49b8801bbd49dfb76e56";c=R}}else{const u="room_58c8f97820ff49b8801bbd49dfb76e56";c=u}return Q.value=c,c}catch(c){throw console.error("获取聊天室ID失败:",c),c}}async function oe(){try{const o=O();if(!o||!o.uid||!o.uuid||!o.token)return;const t=await z();Wt(o.uuid,o.token,o.uid,t,o.openName||"用户").catch(f=>{console.log("静默加入聊天室失败:",f)})}catch(o){console.log("获取聊天室ID失败，跳过加入聊天室:",o)}}async function L(){try{const o=await z();typeof window.uni<"u"&&window.uni.navigateTo?window.uni.navigateTo({url:`/pages/chatroom/chat/index?roomId=${o}&back=1`}):Z.warning("当前环境不支持聊天室功能",void 0,r)}catch(o){console.error("进入聊天室失败:",o),Z.error("进入聊天室失败，请稍后再试",void 0,r)}}async function U(){var o,t,f,c,u,p;A.value=!0,F.value="";try{const R=Number(h.params.id);if(isNaN(R)){n.value=null;return}const B=O(),q=(B==null?void 0:B.uid)||null,D=await Ft(R,q);if(D.data&&D.data.code===0){n.value=D.data.data,console.log("获取到的抽奖详情:",n.value),console.log("activityId:",(o=n.value)==null?void 0:o.activityId),!(n.value.prizes&&n.value.prizes.some(E=>E.name.includes(r("lottery.lotteryDetail.thanksParticipation"))||E.level.includes(r("lottery.lotteryDetail.notWin"))))&&n.value.prizes&&n.value.prizes.length>0&&(console.warn("抽奖活动添加前端'谢谢参与'奖项，请在后台配置正式添加"),n.value.prizes.push({id:"thanks-item-"+Date.now(),lotteryId:n.value.id,level:"未中奖",name:r("lottery.lotteryDetail.thanksParticipation"),probability:50,image:null})),n.value.remainingDraws!==void 0?b.remainingDraws=n.value.remainingDraws:n.value.rule&&(b.remainingDraws=n.value.rule.drawLimit),n.value.remainingDrawsToday!==void 0?b.remainingDrawsToday=n.value.remainingDrawsToday:n.value.rule&&(b.remainingDrawsToday=n.value.rule.dailyLimit);try{const E=await Ue(R);((t=E.data)==null?void 0:t.code)===0&&(W.value=E.data.data)}catch(E){console.error("获取助力配置失败:",E)}if(M())try{const E=O();if(E!=null&&E.uid){const ne=await he(R,E.uid);((f=ne.data)==null?void 0:f.code)===0&&(S.value=((c=ne.data.data)==null?void 0:c.remainingHelpDraws)||0,le.value=((u=ne.data.data)==null?void 0:u.totalHelpDraws)||0)}}catch(E){console.error("获取助力统计失败:",E)}}else throw n.value=null,new Error(((p=D.data)==null?void 0:p.msg)||"获取抽奖活动详情失败")}catch(R){console.error("获取抽奖活动详情失败:",R),R.message.includes("临时授权")?(F.value="无法获取临时授权，请刷新页面重试",Xe()):F.value=R.message||"网络错误，请稍后再试",n.value=null}finally{A.value=!1}}function ve(){Xe(),U()}async function Fe(){var o,t,f;if(!P.value){P.value=!0;try{if(console.log("开始刷新抽奖次数"),await U(),M()){const c=O();if(c!=null&&c.uid)try{const u=await he(n.value.id,c.uid);((o=u.data)==null?void 0:o.code)===0&&(S.value=((t=u.data.data)==null?void 0:t.remainingHelpDraws)||0,le.value=((f=u.data.data)==null?void 0:f.totalHelpDraws)||0,console.log("助力抽奖次数已刷新:",S.value),console.log("获得助力次数已刷新:",le.value))}catch(u){console.error("刷新助力统计失败:",u)}}console.log("抽奖次数刷新完成")}catch(c){console.error("刷新抽奖次数失败:",c)}finally{P.value=!1}}}function Ee(o){const t=new Date(o);return`${t.getFullYear()}-${(t.getMonth()+1).toString().padStart(2,"0")}-${t.getDate().toString().padStart(2,"0")}`}function nt(o){const t=["#FF6B6B","#4ECDC4","#45B7D1","#FFA5A5","#845EC2","#D65DB1","#FF9671","#FFC75F","#F9F871","#B39CD0","#00C9A7","#C34A36"];return t[o%t.length]}function rt(o){return o==null?"未知":`${Number(o).toFixed(2)}%`}function it(o){return o==null?r("lottery.lotteryDetail.rarityCommon"):o<1?r("lottery.lotteryDetail.rarityLegendary"):o<5?r("lottery.lotteryDetail.rarityEpic"):o<10?r("lottery.lotteryDetail.rarityRare"):o<20?r("lottery.lotteryDetail.rarityExcellent"):r("lottery.lotteryDetail.rarityCommon")}function dt(o){return o==null?{icon:"question-circle",color:"text-gray-400"}:o<1?{icon:"crown",color:"text-yellow-500"}:o<5?{icon:"gem",color:"text-purple-500"}:o<10?{icon:"star",color:"text-blue-500"}:o<20?{icon:"certificate",color:"text-green-500"}:{icon:"circle",color:"text-gray-400"}}function ct(o,t){return o==null?"无限制":t!=null?`${t}/${o}`:`总量: ${o}`}const ut=G(()=>{var o;return(o=n.value)!=null&&o.prizes?n.value.prizes.filter(t=>{var f,c;return!((f=t.name)!=null&&f.includes(r("lottery.lotteryDetail.thanksParticipation")))&&!((c=t.level)!=null&&c.includes(r("lottery.lotteryDetail.notWin")))}):[]});async function vt(){if(console.log("isDrawing.value",y.value,"canDraw.value",ie.value),!(y.value||!ie.value)){y.value=!0,b.remainingDrawsToday>0&&(b.remainingDrawsToday-=1,b.remainingDraws-=1),n.value.lotteryType==="wheel"?ft():n.value.lotteryType==="box"&&ht();try{const o=O();if(!o||!o.uid||!o.uuid||!o.token){console.error("用户信息不完整，无法参与抽奖"),X(),y.value=!1;return}const t=Number(h.params.id),f=await Vt(t,o.uid,o.uuid,o.token);if(f.data&&f.data.code===0){const c=f.data.data;if(b.remainingDraws=c.remainingDraws,b.remainingDrawsToday=c.remainingDrawsToday,c.remainingHelpDraws!==void 0&&(S.value=c.remainingHelpDraws),oe(),I.value={win:c.win,prize:c.prize,winnerId:c.winnerId,remainingDraws:c.remainingDraws,remainingDrawsToday:c.remainingDrawsToday,helpDraws:c.helpDraws},n.value.lotteryType==="wheel")if(c.win)je(c.prize);else{const u=n.value.prizes.find(p=>p.name.includes(r("lottery.lotteryDetail.thanksParticipation"))||p.level.includes(r("lottery.lotteryDetail.notWin")));if(u)je(u);else{const p=Math.floor(Math.random()*n.value.prizes.length);je(n.value.prizes[p]),console.warn('转盘上没有"谢谢参与"奖项，请在后台配置添加')}}}else Ve(),Z.error("抽奖失败，请稍后再试"),y.value=!1}catch(o){console.error("参与抽奖失败:",o),Ve(),Z.error("网络错误，请稍后再试"),y.value=!1}}}function Ve(){b.remainingDrawsToday+=1,b.remainingDraws+=1}function ft(){var f;if(!ee.value||!((f=n.value)!=null&&f.prizes))return;const o=$.value,t=3600+Math.random()*1800;$.value=o+t}function je(o){var q;if(!ee.value||!((q=n.value)!=null&&q.prizes))return;let t=0;o&&(t=n.value.prizes.findIndex(D=>D.id===o.id),t===-1&&(t=0));const c=360-(t*J.value+J.value/2),u=$.value,p=c-u%360,R=p<0?p+360:p,B=u+R;$.value=B,setTimeout(()=>{Y.value=!0,y.value=!1},5e3)}function ht(){K.value&&(H.value="opening",setTimeout(()=>{H.value="opened",setTimeout(()=>{Y.value=!0,y.value=!1},2500),setTimeout(()=>{H.value="initial"},4e3)},1500))}function mt(){var o;Y.value=!1,b.remainingDrawsToday<=0&&(console.log("今日剩余次数为0，打开助力邀请窗口"),(o=W.value)!=null&&o.helpEnabled?k.value=!0:Z.info("今日抽奖次数已用完，请明天再来"))}function gt(){Y.value=!1}function We(){Y.value=!1,m.push("/my-lottery")}function Ge(){var o;if(console.log("点击抽奖按钮"),console.log("canDraw:",ie.value),console.log("drawInfo:",b),console.log("helpDraws:",S.value),!M()){X();return}if(b.remainingDrawsToday<=0){console.log("今日剩余次数为0且助力次数为0，显示助力邀请窗口"),(o=W.value)!=null&&o.helpEnabled?k.value=!0:se.value=!0;return}if(!ie.value){if(console.log("不可抽奖，检查原因"),b.remainingDraws<=0&&b.remainingDrawsToday<=0&&S.value<=0){console.log("剩余次数为0，显示提示弹窗"),se.value=!0;return}return}console.log("开始抽奖"),vt()}async function pt(o){var t,f,c;try{const u=O();if(u!=null&&u.uid){const p=await he(n.value.id,u.uid);((t=p.data)==null?void 0:t.code)===0&&(S.value=((f=p.data.data)==null?void 0:f.remainingHelpDraws)||0,le.value=((c=p.data.data)==null?void 0:c.totalHelpDraws)||0)}}catch(u){console.error("更新助力统计失败:",u)}}function Te(){if(!M()){X();return}k.value=!0}function qe(){k.value=!1}function ze(){se.value=!1}function yt(){ze(),Te()}function xt(){te.value=!0}function bt(){te.value=!1}function wt(o){const t=o*J.value,f=(o+1)*J.value,c=50+50*Math.sin(t*Math.PI/180),u=50-50*Math.cos(t*Math.PI/180),p=50+50*Math.sin(f*Math.PI/180),R=50-50*Math.cos(f*Math.PI/180),B=J.value>180?1:0;return`M 50 50 L ${c} ${u} A 50 50 0 ${B} 1 ${p} ${R} Z`}function Oe(o){const t=(o*J.value+J.value/2)*Math.PI/180,f=30;return{x:50+f*Math.sin(t)-7.5,y:50-f*Math.cos(t)-7.5}}function kt(o){const t=o*J.value,f=(o+1)*J.value,c=(t+f)/2,u=42,p=J.value*.6,R=c-p/2,B=c+p/2,q=R*Math.PI/180,D=B*Math.PI/180,ae=50+u*Math.sin(q),E=50-u*Math.cos(q),ne=50+u*Math.sin(D),w=50-u*Math.cos(D);return c>90&&c<270?`M ${ne} ${w} A ${u} ${u} 0 0 0 ${ae} ${E}`:`M ${ae} ${E} A ${u} ${u} 0 0 1 ${ne} ${w}`}function Ze(o){console.log("收到登录成功事件:",o.detail);const{token:t,uuid:f,uid:c}=o.detail;He({uuid:f,token:t,uid:c,openName:"用户"}),U()}return st(async()=>{await v(),await s(),j().then(o=>{o||(console.log("用户信息校验失败，需要重新登录"),M()&&X())}).catch(o=>{console.error("用户信息校验过程中发生错误:",o)}),window.addEventListener("login-success",Ze),U()}),tt(()=>{window.removeEventListener("login-success",Ze)}),(o,t)=>{var c,u,p,R,B,q,D,ae,E,ne;const f=Ht("router-link");return i(),d("div",{class:V(["lottery-detail min-h-screen bg-gradient-to-b from-[#0f172a] via-[#1e293b] to-[#334155] relative overflow-hidden w-full max-w-full",Ce.value])},[e("div",Il,[(i(),d(re,null,ue(50,w=>e("div",{key:`star-${w}`,class:"star absolute rounded-full",style:fe({width:`${Math.random()*3+1}px`,height:`${Math.random()*3+1}px`,top:`${Math.random()*100}%`,left:`${Math.random()*100}%`,animationDelay:`${Math.random()*10}s`,animationDuration:`${Math.random()*10+10}s`})},null,4)),64))]),e("header",jl,[e("div",Tl,[e("div",zl,[e("div",{onClick:we,class:"text-indigo-300 mr-3 hover:text-indigo-200 transition-colors flex items-center cursor-pointer"},t[6]||(t[6]=[e("svg",{class:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M19 12H5M12 19l-7-7 7-7"})],-1)])),e("h1",Hl,l(((c=n.value)==null?void 0:c.name)||a(r)("lottery.lotteryDetail.title")),1)]),e("div",Ll,[a(M)()?(i(),d("button",{key:0,onClick:We,class:"px-4 py-2 bg-gradient-to-r from-purple-500/20 to-indigo-500/20 backdrop-blur-sm rounded-lg text-indigo-100 hover:from-purple-500/30 hover:to-indigo-500/30 transition-all border border-indigo-400/20 flex items-center"},t[7]||(t[7]=[pe('<svg class="w-4 h-4 mr-1" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-5791136a><path d="M16 4h2a2 2 0 012 2v14a2 2 0 01-2 2H6a2 2 0 01-2-2V6a2 2 0 012-2h2" data-v-5791136a></path><rect x="8" y="2" width="8" height="4" rx="1" ry="1" data-v-5791136a></rect><path d="M12 11v6" data-v-5791136a></path><path d="M9 14h6" data-v-5791136a></path></svg>',1)]))):_("",!0),e("button",{onClick:xt,class:"px-4 py-2 bg-gradient-to-r from-green-500/20 to-blue-500/20 backdrop-blur-sm rounded-lg text-indigo-100 hover:from-green-500/30 hover:to-blue-500/30 transition-all border border-indigo-400/20 flex items-center"},[t[8]||(t[8]=e("svg",{class:"w-4 h-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z"})],-1)),N(" "+l(a(r)("lottery.lotteryDetail.share")),1)]),a(M)()?_("",!0):(i(),d("button",{key:1,onClick:t[0]||(t[0]=()=>a(X)()),class:"px-4 py-2 bg-gradient-to-r from-purple-500/20 to-indigo-500/20 backdrop-blur-sm rounded-lg text-indigo-100 hover:from-purple-500/30 hover:to-indigo-500/30 transition-all border border-indigo-400/20 flex items-center"},[t[9]||(t[9]=e("svg",{class:"w-4 h-4 mr-1",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M15 3h4a2 2 0 012 2v14a2 2 0 01-2 2h-4"}),e("polyline",{points:"10 17 15 12 10 7"}),e("line",{x1:"15",y1:"12",x2:"3",y2:"12"})],-1)),N(" "+l(a(r)("lottery.lotteryDetail.connectWallet")),1)]))])])]),F.value?(i(),d("div",Rl,[e("div",Bl,[t[12]||(t[12]=e("svg",{class:"w-16 h-16 mx-auto mb-4 text-red-400",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5"},[e("circle",{cx:"12",cy:"12",r:"10"}),e("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),e("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})],-1)),e("h2",Sl,l(a(r)("lottery.lotteryDetail.error")),1),e("p",Ul,l(F.value),1),e("div",Al,[e("button",{onClick:ve,class:"px-5 py-2 bg-red-600/30 hover:bg-red-600/50 text-red-100 rounded-lg transition-all flex items-center"},[t[10]||(t[10]=e("svg",{class:"w-4 h-4 mr-2",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M23 4v6h-6"}),e("path",{d:"M1 20v-6h6"}),e("path",{d:"M3.51 9a9 9 0 0114.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0020.49 15"})],-1)),N(" "+l(a(r)("lottery.lotteryDetail.reconnect")),1)]),ye(f,{to:de.value.to,class:"px-5 py-2 bg-indigo-600/30 hover:bg-indigo-600/50 text-indigo-100 rounded-lg transition-all flex items-center"},{default:_e(()=>[t[11]||(t[11]=e("svg",{class:"w-4 h-4 mr-2",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M3 9l9-7 9 7v11a2 2 0 01-2 2H5a2 2 0 01-2-2z"}),e("polyline",{points:"9 22 9 12 15 12 15 22"})],-1)),N(" "+l(de.value.text),1)]),_:1},8,["to"])])])])):A.value?(i(),d("div",Pl,[e("div",Nl,[t[13]||(t[13]=pe('<svg width="80" height="80" viewBox="0 0 80 80" fill="none" data-v-5791136a><circle cx="40" cy="40" r="32" stroke="#8b5cf6" stroke-width="2" stroke-dasharray="80,60" stroke-linecap="round" data-v-5791136a><animateTransform attributeName="transform" type="rotate" from="0 40 40" to="360 40 40" dur="1.5s" repeatCount="indefinite" data-v-5791136a></animateTransform></circle><circle cx="40" cy="40" r="20" stroke="#a78bfa" stroke-width="2" stroke-dasharray="50,40" stroke-linecap="round" data-v-5791136a><animateTransform attributeName="transform" type="rotate" from="360 40 40" to="0 40 40" dur="1.2s" repeatCount="indefinite" data-v-5791136a></animateTransform></circle></svg>',1)),e("p",Fl,l(a(r)("lottery.common.loading")),1)])])):n.value?(i(),d("div",Gl,[((u=n.value)==null?void 0:u.lotteryType)==="wheel"?(i(),d("div",ql,[e("div",Ol,[e("div",Zl,[t[23]||(t[23]=e("div",{class:"absolute -top-2 -left-2 -right-2 -bottom-2 rounded-full bg-gradient-to-br from-indigo-600/60 to-purple-600/60 animate-[spin_10s_linear_infinite] blur-[2px] z-0"},null,-1)),t[24]||(t[24]=e("div",{class:"absolute -top-2 -left-2 -right-2 -bottom-2 rounded-full bg-gradient-to-tl from-pink-500/30 to-indigo-500/30 animate-[spin_15s_linear_infinite_reverse] blur-[3px] z-0"},null,-1)),e("div",Ql,[e("div",Yl,[t[20]||(t[20]=e("div",{class:"absolute inset-0 bg-[radial-gradient(circle_at_center,rgba(139,92,246,0.2)_0%,transparent_70%)] z-[1]"},null,-1)),t[21]||(t[21]=e("div",{class:"absolute inset-0 overflow-hidden"},[e("div",{class:"absolute top-0 left-1/2 h-[1px] w-[40%] -translate-x-1/2 bg-gradient-to-r from-transparent via-indigo-400 to-transparent blur-[2px] animate-[shine_4s_ease-in-out_infinite]"}),e("div",{class:"absolute bottom-0 left-1/2 h-[1px] w-[40%] -translate-x-1/2 bg-gradient-to-r from-transparent via-purple-400 to-transparent blur-[2px] animate-[shine_4s_ease-in-out_infinite_1s]"})],-1)),e("div",Jl,[(i(),d("svg",{ref_key:"wheelRef",ref:ee,class:"w-full h-full transition-transform duration-5000 ease-out",style:fe({transform:`rotate(${$.value}deg)`}),viewBox:"0 0 100 100"},[t[16]||(t[16]=e("circle",{cx:"50",cy:"50",r:"50",fill:"none"},null,-1)),(i(!0),d(re,null,ue((p=n.value)==null?void 0:p.prizes,(w,ce)=>(i(),d("g",{key:w.id},[e("path",{d:wt(ce),fill:nt(ce),class:"hover:opacity-90 transition-opacity"},null,8,Kl),e("line",{x1:50,y1:50,x2:50+50*Math.sin((ce+1)*J.value*Math.PI/180),y2:50-50*Math.cos((ce+1)*J.value*Math.PI/180),stroke:"#ffffff","stroke-width":"0.3","stroke-opacity":"0.5"},null,8,Xl),w.name!==a(r)("lottery.lotteryDetail.thanksParticipation")&&T(w.image)?(i(),d("image",{key:0,href:T(w.image),x:Oe(ce).x,y:Oe(ce).y,height:"15",width:"15",preserveAspectRatio:"xMidYMid meet"},null,8,es)):_("",!0),e("path",{id:`textPath-${w.id}`,d:kt(ce),fill:"none"},null,8,ts),e("text",os,[e("textPath",{href:`#textPath-${w.id}`,startOffset:"50%","text-anchor":"middle"},l(w.name),9,ls)])]))),128)),t[17]||(t[17]=e("circle",{cx:"50",cy:"50",r:"8",fill:"url(#centerGradient)"},null,-1)),t[18]||(t[18]=e("defs",null,[e("radialGradient",{id:"centerGradient",cx:"50%",cy:"50%",r:"50%",fx:"50%",fy:"50%"},[e("stop",{offset:"0%","stop-color":"#FFD700"}),e("stop",{offset:"100%","stop-color":"#FFA500"})])],-1))],4))]),e("div",ss,[t[19]||(t[19]=e("div",{class:"absolute top-0 left-1/2 transform -translate-x-1/2 w-8 h-16"},[e("div",{class:"w-0 h-0 border-l-[15px] border-l-transparent border-r-[15px] border-r-transparent border-b-[30px] border-b-yellow-500 relative"},[e("div",{class:"absolute -inset-1 border-l-[15px] border-l-transparent border-r-[15px] border-r-transparent border-b-[30px] border-b-yellow-300 blur-[8px] opacity-70"})])],-1)),e("div",{class:V(["w-24 h-24 relative rounded-full flex items-center justify-center shadow-[0_0_25px_#da3e36,0_0_50px_#c92a2a]",{"animate-pulse-button":!y.value}]),style:{background:`linear-gradient(
                        135deg,
                        #da3e36 0%,
                        #c92a2a 100%
                      )`}},[e("div",as,[e("div",ns,[e("div",{class:V(["font-bold text-xl",{"animate-text-glow":!y.value}]),style:{color:"#ffd700","text-shadow":`2px 2px 0px #b8860b,
                              4px 4px 8px rgba(0, 0, 0, 0.5), 0 0 10px #ffd700`,"font-weight":"900","letter-spacing":"1px"}},l(a(r)("lottery.lotteryDetail.draw")),3)])]),e("div",{class:V(["absolute inset-0 rounded-full border-2",{"animate-[spin_5s_linear_infinite]":!y.value}]),style:{"border-color":"rgba(218, 62, 54, 0.8)"}},null,2),e("div",{class:V(["absolute inset-2 rounded-full border-2 border-dashed",{"animate-[spin_8s_linear_infinite_reverse]":!y.value}]),style:{"border-color":"rgba(201, 42, 42, 0.7)"}},null,2),e("div",{class:V(["absolute -inset-4 rounded-full border-2",{"animate-[spin_3s_linear_infinite]":!y.value}]),style:{"border-color":"rgba(218, 62, 54, 0.6)"}},null,2),e("div",{class:V(["absolute -inset-6 rounded-full border",{"animate-[spin_4s_linear_infinite_reverse]":!y.value}]),style:{"border-color":"rgba(201, 42, 42, 0.5)"}},null,2),e("div",{class:V(["absolute -inset-8 rounded-full",{"animate-pulse-ring":!y.value}]),style:{background:`linear-gradient(
                          to right,
                          rgba(218, 62, 54, 0.5),
                          rgba(201, 42, 42, 0.5)
                        )`}},null,2)],2)])]),e("button",{onClick:Ge,disabled:y.value,class:V(["absolute inset-0 m-auto w-24 h-24 rounded-full flex items-center justify-center text-indigo-900 font-bold text-xl transform hover:scale-110 hover:shadow-[0_0_25px_rgba(234,179,8,0.8)] active:scale-95 transition-all duration-300 z-30 focus:outline-none focus:ring focus:ring-yellow-300/50 cursor-pointer button-hover-effect",{"opacity-50 cursor-not-allowed":y.value,"button-click-effect":!y.value}])},t[22]||(t[22]=[e("span",{class:"sr-only"},"抽奖按钮",-1)]),10,rs)])]),e("div",is,[a(M)()?(i(),d("div",ds,[e("div",cs,[e("div",us,[e("div",vs,[e("div",fs,l(a(r)("lottery.lotteryDetail.remainingDrawsToday")),1),e("div",hs,l(b.remainingDrawsToday||0),1)]),e("div",ms,[e("div",gs,l(a(r)("lottery.lotteryDetail.remainingDraws")),1),e("div",ps,l(b.remainingDraws||0),1)]),e("div",ys,[e("div",xs,l(a(r)("lottery.lotteryDetail.helpDraws")),1),e("div",bs,l(le.value||0),1)])])]),e("button",{onClick:Fe,disabled:P.value,class:"absolute -right-2 top-1/2 transform -translate-y-1/2 w-8 h-8 bg-indigo-600 hover:bg-indigo-700 rounded-full flex items-center justify-center transition-all disabled:opacity-50 disabled:cursor-not-allowed shadow-lg z-10",title:a(r)("lottery.lotteryDetail.refreshDraws"),style:{"margin-top":"8px","margin-right":"-35px"}},[(i(),d("svg",{class:V(["w-4 h-4 text-white",{"animate-spin":P.value}]),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},t[25]||(t[25]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1)]),2))],8,ws)])):(i(),d("div",ks,[e("button",{onClick:t[1]||(t[1]=()=>a(X)()),class:"px-5 py-3 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-lg hover:from-indigo-700 hover:to-purple-700 transition-all flex mx-auto items-center shadow-lg shadow-indigo-900/30"},[t[26]||(t[26]=e("svg",{class:"w-4 h-4 mr-2",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M15 3h4a2 2 0 012 2v14a2 2 0 01-2 2h-4"}),e("polyline",{points:"10 17 15 12 10 7"}),e("line",{x1:"15",y1:"12",x2:"3",y2:"12"})],-1)),N(" "+l(a(r)("lottery.lotteryDetail.connectWallet")),1)])])),(R=W.value)!=null&&R.helpEnabled?(i(),d("div",_s,[e("button",{onClick:Te,class:"px-6 py-3 bg-gradient-to-r from-green-600 to-blue-600 text-white rounded-lg hover:from-green-700 hover:to-blue-700 transition-all font-medium flex items-center mx-auto relative z-10"},[t[27]||(t[27]=e("svg",{class:"w-5 h-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})],-1)),N(" "+l(a(r)("lottery.lotteryDetail.inviteFriends")),1)])])):_("",!0)])])])):((B=n.value)==null?void 0:B.lotteryType)==="box"?(i(),d("div",Cs,[e("div",Ds,[e("div",Ms,l(a(r)("lottery.lotteryDetail.boxDesc")),1),e("div",$s,[t[34]||(t[34]=e("div",{class:"absolute -inset-10 bg-[radial-gradient(ellipse_at_center,rgba(139,92,246,0.15),transparent_80%)] pointer-events-none"},null,-1)),e("div",Is,[e("div",{class:V(["relative w-80 h-80 perspective-1000",{"pointer-events-none":y.value}])},[e("div",{ref_key:"boxRef",ref:K,class:V(["relative w-full h-full transform-style-3d transition-all duration-1000",{"opacity-50 cursor-not-allowed":y.value,"cursor-pointer":!y.value}]),onClick:Ge},[H.value==="initial"?(i(),d("div",{key:0,class:V(["absolute inset-0 backface-hidden rounded-lg shadow-2xl flex items-center justify-center border border-indigo-500/30 overflow-hidden",{"animate-pulse-glow":!y.value}])},[e("img",{src:Gt,alt:a(r)("lottery.lotteryDetail.closedBlindbox"),class:V(["absolute inset-0 w-full h-full object-cover transition-all duration-1000",{"scale-105 brightness-110":!y.value,"scale-100 brightness-100":y.value}])},null,10,js),e("div",Ts,[t[28]||(t[28]=e("div",{class:"w-24 h-24 mx-auto mb-4 bg-gradient-to-br from-purple-500/30 to-blue-500/30 rounded-full flex items-center justify-center animate-pulse-glow"},[e("div",{class:"w-16 h-16 bg-gradient-to-br from-pink-500 to-purple-600 rounded-full flex items-center justify-center shadow-lg"},[e("i",{class:"fas fa-gift text-white text-3xl animate-bounce"})])],-1)),e("div",zs,l(a(r)("lottery.lotteryDetail.boxTitle")),1),e("div",Hs,l(a(r)("lottery.lotteryDetail.clickToOpen")),1)]),e("div",Ls,[(i(),d(re,null,ue(12,w=>e("div",{key:`decoration-particle-${w}`,class:"decoration-particle absolute w-1 h-1 rounded-full bg-white/60",style:fe({top:`${Math.random()*100}%`,left:`${Math.random()*100}%`,animationDelay:`${Math.random()*3}s`,animationDuration:`${Math.random()*2+1}s`})},null,4)),64))])],2)):_("",!0),H.value==="opening"?(i(),d("div",Rs,[t[29]||(t[29]=pe('<div class="absolute inset-0 overflow-hidden" data-v-5791136a><img src="'+Le+'" alt="星爆能量" class="absolute inset-0 w-full h-full object-cover animate-spin-reverse brightness-200" style="transform:scale(1.2);" data-v-5791136a><img src="'+Le+'" alt="星爆能量" class="absolute inset-0 w-full h-full object-cover animate-spin-slow brightness-175" style="transform:scale(1.1);opacity:0.9;" data-v-5791136a><img src="'+Le+'" alt="星爆能量" class="absolute inset-0 w-full h-full object-cover animate-spin-fast brightness-150" style="transform:scale(1);opacity:0.8;" data-v-5791136a></div><div class="relative z-10 flex items-center justify-center" data-v-5791136a><div class="absolute w-32 h-32 border-2 border-yellow-400/40 rounded-full animate-spin-reverse" data-v-5791136a></div><div class="absolute w-28 h-28 border border-orange-400/50 rounded-full animate-spin-slow" data-v-5791136a></div><div class="w-24 h-24 mx-auto bg-black/60 rounded-full flex items-center justify-center animate-pulse-scale" data-v-5791136a><div class="w-16 h-16 bg-gradient-to-br from-yellow-400 to-orange-500 rounded-full animate-spin-slow brightness-110" data-v-5791136a></div></div></div>',2)),e("div",Bs,[(i(),d(re,null,ue(25,w=>e("div",{key:`energy-particle-${w}`,class:"energy-particle absolute w-2 h-2 rounded-full",style:fe({top:`${Math.random()*100}%`,left:`${Math.random()*100}%`,backgroundColor:["#FCD34D","#F97316","#EC4899","#8B5CF6"][Math.floor(Math.random()*4)],animationDelay:`${Math.random()*2}s`,animationDuration:`${Math.random()*2+1}s`})},null,4)),64))]),t[30]||(t[30]=e("div",{class:"absolute inset-0 pointer-events-none"},[e("div",{class:"absolute inset-4 border-2 border-yellow-400/50 rounded-full animate-spin-slow"}),e("div",{class:"absolute inset-8 border border-orange-400/40 rounded-full animate-spin-reverse"}),e("div",{class:"absolute inset-12 border border-red-400/30 rounded-full animate-spin-slow"})],-1))])):_("",!0),H.value==="opened"?(i(),d("div",Ss,[e("img",{src:qt,alt:a(r)("lottery.lotteryDetail.openedBlindbox"),class:V(["absolute inset-0 w-full h-full object-cover transition-all duration-1000 brightness-125",{"scale-105":!0}])},null,8,Us),I.value&&I.value.win?(i(),d("div",As,[(i(),d(re,null,ue(30,w=>e("div",{key:`celebration-particle-${w}`,class:"celebration-particle absolute w-3 h-3 rounded-full",style:fe({top:`${Math.random()*100}%`,left:`${Math.random()*100}%`,backgroundColor:["#FCD34D","#F97316","#EC4899","#8B5CF6","#06B6D4","#10B981"][Math.floor(Math.random()*6)],opacity:Math.random()*.8+.2,animationDelay:`${Math.random()*2}s`,animationDuration:`${Math.random()*3+2}s`})},null,4)),64))])):_("",!0)])):_("",!0)],2)],2)]),e("div",Ps,[a(M)()?(i(),d("div",Ns,[e("div",Fs,[e("div",Es,[e("div",Vs,[e("div",Ws,l(a(r)("lottery.lotteryDetail.todayRemaining")),1),e("div",Gs,l(b.remainingDrawsToday||0),1)]),e("div",qs,[e("div",Os,l(a(r)("lottery.lotteryDetail.totalRemaining")),1),e("div",Zs,l(b.remainingDraws||0),1)]),e("div",Qs,[e("div",Ys,l(a(r)("lottery.lotteryDetail.helpAssistDraws")),1),e("div",Js,l(S.value||0),1)])])]),e("button",{onClick:Fe,disabled:P.value,class:"absolute -right-2 top-1/2 transform -translate-y-1/2 w-8 h-8 bg-indigo-600 hover:bg-indigo-700 rounded-full flex items-center justify-center transition-all disabled:opacity-50 disabled:cursor-not-allowed shadow-lg z-10",title:a(r)("lottery.lotteryDetail.refreshDraws"),style:{"margin-top":"8px","margin-right":"-35px"}},[(i(),d("svg",{class:V(["w-4 h-4 text-white",{"animate-spin":P.value}]),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},t[31]||(t[31]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1)]),2))],8,Ks)])):(i(),d("div",Xs,[e("button",{onClick:t[2]||(t[2]=()=>a(X)()),class:"px-5 py-3 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-lg hover:from-indigo-700 hover:to-purple-700 transition-all flex mx-auto items-center shadow-lg shadow-indigo-900/30"},[t[32]||(t[32]=e("svg",{class:"w-4 h-4 mr-2",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M15 3h4a2 2 0 012 2v14a2 2 0 01-2 2h-4"}),e("polyline",{points:"10 17 15 12 10 7"}),e("line",{x1:"15",y1:"12",x2:"3",y2:"12"})],-1)),N(" "+l(a(r)("lottery.lotteryDetail.connectWallet")),1)])])),(q=W.value)!=null&&q.helpEnabled?(i(),d("div",ea,[e("button",{onClick:Te,class:"px-6 py-3 bg-gradient-to-r from-green-600 to-blue-600 text-white rounded-lg hover:from-green-700 hover:to-blue-700 transition-all font-medium flex items-center mx-auto"},[t[33]||(t[33]=e("svg",{class:"w-5 h-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})],-1)),N(" "+l(a(r)("lottery.lotteryDetail.inviteFriends")),1)])])):_("",!0)])])])])):_("",!0),(D=n.value)!=null&&D.activityName?(i(),d("div",ta,[e("div",{onClick:t[3]||(t[3]=w=>Ie(n.value.activityId)),class:"inline-flex items-center px-6 py-3 bg-gradient-to-r from-indigo-500/20 to-purple-500/20 backdrop-blur-sm rounded-full border border-indigo-400/30 hover:from-indigo-500/30 hover:to-purple-500/30 transition-all cursor-pointer group"},[e("div",oa,[t[35]||(t[35]=e("div",{class:"w-8 h-8 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-full flex items-center justify-center"},[e("svg",{class:"w-4 h-4 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})])],-1)),e("div",la,[e("div",sa,l(n.value.activityName),1)]),t[36]||(t[36]=e("div",{class:"w-5 h-5 text-indigo-300 group-hover:text-indigo-200 transition-colors"},[e("svg",{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})])],-1))])])])):_("",!0),e("div",aa,[e("div",{class:"absolute inset-0",style:fe({backgroundImage:`url(${T((ae=n.value)==null?void 0:ae.background)})`,backgroundSize:"cover",backgroundPosition:"center",filter:"blur(6px)",transform:"scale(1.1)",zIndex:0})},null,4),t[37]||(t[37]=e("div",{class:"absolute inset-0 bg-black/40 z-[1]"},null,-1)),e("div",na,[e("img",{src:T((E=n.value)==null?void 0:E.icon),alt:"活动图标",class:"w-24 h-24 md:w-32 md:h-32 rounded-xl object-cover shadow-xl mb-4 md:mb-0 md:mr-6"},null,8,ra),e("div",ia,[e("h1",da,l(n.value.name),1),e("div",ca,[e("span",ua,l(n.value.lotteryType==="wheel"?a(r)("lottery.lotteryList.wheel"):a(r)("lottery.lotteryList.blindbox")),1),e("span",va,l(a(r)("lottery.lotteryDetail.sponsorLabel"))+": "+l(n.value.sponsor),1)]),e("p",fa,l(n.value.description),1),e("div",ha,[e("div",null,l(a(r)("lottery.lotteryDetail.activityTime"))+": "+l(Ee(n.value.startTime))+" 至 "+l(Ee(n.value.endTime)),1),n.value.rule?(i(),d("div",ma,[e("span",null,l(a(r)("lottery.lotteryDetail.drawRules",{total:n.value.rule.drawLimit,daily:n.value.rule.dailyLimit})),1),n.value.rule.additionalInfo?(i(),d("span",ga," · "+l(n.value.rule.additionalInfo),1)):_("",!0)])):_("",!0)])])])]),Y.value?(i(),d("div",pa,[e("div",ya,[e("div",xa,[e("div",{class:V(["rounded-full w-20 h-20 flex items-center justify-center mx-auto mb-4",I.value.win?"bg-yellow-500":"bg-gray-600"])},[e("i",{class:V([I.value.win?"fas fa-trophy text-yellow-200":"fas fa-heart-broken text-white","text-4xl"])},null,2)],2),e("h3",ba,l(I.value.win?a(r)("lottery.lotteryDetail.congratulations"):a(r)("lottery.lotteryDetail.notWin")),1),I.value.win&&I.value.prize?(i(),d("div",wa,[e("div",ka,l(I.value.prize.name),1),e("div",_a,l(I.value.prize.level),1)])):I.value.win?_("",!0):(i(),d("div",Ca,l(a(r)("lottery.lotteryDetail.notWonMessage")),1)),e("div",Da,[e("div",null,l(a(r)("lottery.lotteryDetail.remainingToday"))+": "+l(b.remainingDrawsToday||0),1),e("div",null,l(a(r)("lottery.lotteryDetail.remainingTotal"))+": "+l(b.remainingDraws||0),1),e("div",Ma,l(a(r)("lottery.lotteryDetail.helpAssistDraws"))+": "+l(S.value||0),1)]),e("div",$a,[ie.value?(i(),d("button",{key:0,onClick:mt,class:"px-5 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-all"},l(a(r)("lottery.lotteryDetail.continueDraw")),1)):_("",!0),I.value.win?(i(),d("button",{key:1,onClick:We,class:"px-5 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-all"},l(a(r)("lottery.lotteryDetail.viewPrizes")),1)):_("",!0),ie.value?_("",!0):(i(),d("button",{key:2,onClick:gt,class:"px-5 py-2 bg-gray-600 text-white rounded-lg"},l(a(r)("lottery.lotteryDetail.tomorrowAgain")),1))])])])])):_("",!0),k.value?(i(),d("div",{key:4,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm",onClick:qe},[e("div",{class:"bg-gradient-to-br from-[#1e293b] to-[#334155] rounded-2xl p-6 max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto border border-indigo-500/20",onClick:t[4]||(t[4]=me(()=>{},["stop"]))},[e("div",Ia,[e("h3",ja,l(a(r)("lottery.components.helpInvite.title")),1),e("button",{onClick:qe,class:"text-indigo-300 hover:text-white transition-colors"},t[38]||(t[38]=[e("svg",{class:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),n.value?(i(),ot($l,{key:0,"lottery-id":n.value.id,"activity-id":n.value.activityId,"auto-create":!0,onInviteCreated:pt},null,8,["lottery-id","activity-id"])):_("",!0)])])):_("",!0),se.value?(i(),d("div",{key:5,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm",onClick:ze},[e("div",{class:"bg-gradient-to-br from-[#1e293b] to-[#334155] rounded-2xl p-6 max-w-md w-full mx-4 border border-indigo-500/20",onClick:t[5]||(t[5]=me(()=>{},["stop"]))},[e("div",Ta,[t[39]||(t[39]=e("div",{class:"w-16 h-16 mx-auto mb-4 bg-gradient-to-br from-orange-500 to-red-600 rounded-full flex items-center justify-center"},[e("svg",{class:"w-8 h-8 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})])],-1)),t[40]||(t[40]=e("h3",{class:"text-xl font-bold text-white mb-2"},"抽奖次数不足",-1)),e("p",za," 您今日剩余抽奖次数为 "+l(b.remainingDrawsToday||0)+"，"+l(a(r)("lottery.lotteryDetail.totalRemaining"))+"为 "+l(b.remainingDraws||0)+"，"+l(a(r)("lottery.lotteryDetail.helpAssistDraws"))+"为 "+l(S.value||0),1)]),e("div",Ha,[(ne=W.value)!=null&&ne.helpEnabled?(i(),d("div",La,[e("button",{onClick:yt,class:"w-full px-6 py-3 bg-gradient-to-r from-green-600 to-blue-600 text-white rounded-lg hover:from-green-700 hover:to-blue-700 transition-all font-medium flex items-center justify-center"},[t[41]||(t[41]=e("svg",{class:"w-5 h-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})],-1)),N(" "+l(a(r)("lottery.lotteryDetail.inviteFriends")),1)])])):_("",!0),e("div",{class:"text-center"},[e("button",{onClick:ze,class:"px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-all"}," 知道了 ")])])])])):_("",!0),e("div",Ra,[e("h2",Ba,[t[42]||(t[42]=e("svg",{class:"w-6 h-6 mr-2 text-indigo-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),N(" "+l(a(r)("lottery.lotteryDetail.prizePoolDetails")),1)]),e("div",Sa,[(i(!0),d(re,null,ue(ut.value,w=>(i(),d("div",{key:w.id,class:"bg-gradient-to-br from-indigo-900/50 to-purple-900/50 backdrop-blur-sm rounded-lg overflow-hidden border border-indigo-500/20 transform transition-all hover:scale-[1.02] hover:shadow-[0_0_15px_rgba(139,92,246,0.2)]"},[e("div",Ua,[w.name===a(r)("lottery.lotteryDetail.thanksParticipation")?(i(),d("div",Aa,[e("div",Pa,[t[43]||(t[43]=e("svg",{class:"w-12 h-12 mx-auto mb-2 opacity-60",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M9 12l2 2 4-4"}),e("circle",{cx:"12",cy:"12",r:"10"})],-1)),e("p",Na,l(a(r)("lottery.lotteryDetail.thanksParticipation")),1)])])):(i(),d("img",{key:1,src:T(w.image),alt:"奖品图片",class:"w-full h-full object-cover"},null,8,Fa)),e("div",Ea,l(w.level),1),t[44]||(t[44]=e("div",{class:"absolute inset-0 bg-gradient-to-t from-black/80 via-transparent to-transparent"},null,-1))]),e("div",Va,[e("div",Wa,[e("h3",Ga,l(w.name),1),e("div",qa,[t[45]||(t[45]=e("svg",{class:"w-4 h-4 text-indigo-300 mr-1",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})],-1)),e("span",Oa,l(rt(w.probability)),1)])]),e("div",Za,[e("div",Qa,[e("div",{class:V([dt(w.probability).color,"mr-1 flex items-center"])},[w.probability<1?(i(),d("svg",Ya,t[46]||(t[46]=[e("path",{d:"M11.9999 1L17.1962 7.6085L24.0005 8.2626L17.9951 13.3167L19.392 20L11.9999 16.8501L4.60787 20L6.0048 13.3167L-0.000488281 8.2626L6.8037 7.6085L11.9999 1Z"},null,-1)]))):w.probability<5?(i(),d("svg",Ja,t[47]||(t[47]=[e("path",{d:"M12 2L6 7L12 22L18 7L12 2Z"},null,-1)]))):w.probability<10?(i(),d("svg",Ka,t[48]||(t[48]=[e("path",{d:"M12 17.27L18.18 21L16.54 13.97L22 9.24L14.81 8.63L12 2L9.19 8.63L2 9.24L7.46 13.97L5.82 21L12 17.27Z"},null,-1)]))):w.probability<20?(i(),d("svg",Xa,t[49]||(t[49]=[e("path",{d:"M12 2C6.47 2 2 6.47 2 12C2 17.53 6.47 22 12 22C17.53 22 22 17.53 22 12C22 6.47 17.53 2 12 2ZM12 20C7.59 20 4 16.41 4 12C4 7.59 7.59 4 12 4C16.41 4 20 7.59 20 12C20 16.41 16.41 20 12 20ZM12 15C13.66 15 15 13.66 15 12C15 10.34 13.66 9 12 9C10.34 9 9 10.34 9 12C9 13.66 10.34 15 12 15Z"},null,-1)]))):(i(),d("svg",en,t[50]||(t[50]=[e("path",{d:"M12 2C6.48 2 2 6.48 2 12C2 17.52 6.48 22 12 22C17.52 22 22 17.52 22 12C22 6.48 17.52 2 12 2Z"},null,-1)])))],2),e("span",null,l(a(r)("lottery.lotteryDetail.rarity"))+": "+l(it(w.probability)),1)]),e("div",tn,l(ct(w.totalQuantity,w.remainQuantity)),1)])])]))),128))])])])):(i(),d("div",El,[t[15]||(t[15]=pe('<div class="empty-state-illustration mb-6" data-v-5791136a><svg width="120" height="120" viewBox="0 0 24 24" fill="none" data-v-5791136a><path d="M10.29 3.86L1.82 18a2 2 0 001.71 3h16.94a2 2 0 001.71-3L13.71 3.86a2 2 0 00-3.42 0z" stroke="#8b5cf6" stroke-width="1.5" data-v-5791136a></path><line x1="12" y1="9" x2="12" y2="13" stroke="#8b5cf6" stroke-width="1.5" data-v-5791136a></line><line x1="12" y1="17" x2="12.01" y2="17" stroke="#8b5cf6" stroke-width="1.5" data-v-5791136a></line><path opacity="0.2" d="M10.29 3.86L1.82 18a2 2 0 001.71 3h16.94a2 2 0 001.71-3L13.71 3.86a2 2 0 00-3.42 0z" fill="#8b5cf6" data-v-5791136a></path></svg></div>',1)),e("div",Vl,l(a(r)("lottery.lotteryDetail.notFound")),1),e("p",Wl,l(a(r)("lottery.lotteryDetail.notFoundDesc")),1),ye(f,{to:de.value.to,class:"px-6 py-3 bg-gradient-to-r from-purple-600/30 to-indigo-600/30 hover:from-purple-600/50 hover:to-indigo-600/50 border border-indigo-500/30 rounded-lg text-indigo-100 transition-all flex items-center"},{default:_e(()=>[t[14]||(t[14]=e("svg",{class:"w-5 h-5 mr-2",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M3 9l9-7 9 7v11a2 2 0 01-2 2H5a2 2 0 01-2-2z"}),e("polyline",{points:"9 22 9 12 15 12 15 22"})],-1)),N(" "+l(de.value.text),1)]),_:1},8,["to"])])),ye(at,{visible:te.value,"share-url":De.value,"share-title":Me.value,"share-text":$e.value,"share-image":ge.value,"user-info":be.value,"is-help-invite":!0,onClose:bt},null,8,["visible","share-url","share-title","share-text","share-image","user-info"]),!A.value&&n.value?(i(),d("div",on,[e("button",{onClick:L,class:"group relative flex flex-col items-center justify-center bg-gradient-to-b from-green-500 to-blue-500 hover:from-green-600 hover:to-blue-600 text-white shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105 border border-white/20 backdrop-blur-sm",style:{width:"80px",height:"80px","border-radius":"40px 0 0 40px"}},[e("div",ln,[e("div",sn,[t[51]||(t[51]=e("svg",{class:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})],-1)),e("span",an,l(a(r)("lottery.lotteryDetail.joinGroupBenefits")),1)])])])])):_("",!0)],2)}}}),cn=Ne(nn,[["__scopeId","data-v-5791136a"]]);export{cn as default};
