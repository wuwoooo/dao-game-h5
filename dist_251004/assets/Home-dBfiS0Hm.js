import{d as U,u as E,r as a,i as _,o as Q,a as X,b as J,c as n,e as r,f as t,g as p,w as O,v as P,h as W,j as m,k as u,l as S,m as Y,n as A,F as D,p as $,t as q,q as Z,_ as ee}from"./index-sn2Iz1lD.js";import{g as se,a as te,b as ae,c as le}from"./game-CibO7eY-.js";import{G as k}from"./GameList-Ge2SVFm8.js";const oe={class:"w-full max-w-full overflow-x-hidden"},ne={class:"py-4 px-2 sm:px-4 md:px-6 lg:px-8 sticky top-0 bg-white/90 backdrop-blur-md z-50 shadow-sm w-full"},re={class:"max-w-7xl mx-auto flex items-center justify-between"},ie={class:"flex-grow max-w-xl mx-2 sm:mx-4"},de={class:"relative"},ce={style:{display:"none"}},me={key:0,class:"flex items-center"},ue={class:"pt-4"},xe={key:0,id:"banner-section",class:"mb-6 md:mb-8 shadow-md rounded-lg mx-2 sm:mx-4 md:mx-6 lg:mx-8 overflow-hidden max-w-7xl mx-auto"},fe={class:"banner-container"},ve={class:"text-2xl md:text-3xl font-bold mb-2"},ge={class:"text-sm md:text-base"},pe={class:"banner-dots"},he=["onClick"],ye={class:"px-2 sm:px-4 md:px-6 lg:px-8 max-w-7xl mx-auto"},we={id:"new-releases-section",class:"mb-12"},be={id:"hot-section",class:"mb-12"},_e={id:"recommend-section",class:"mb-12"},ke=U({__name:"Home",setup(Ge){const F=E(),i=a([]),G=a([]),C=a([]),R=a([]),B=a(!0),h=a(!0),y=a(!0),w=a(!0),b=a(""),x=a(""),f=a(""),v=a(""),g=a(""),d=a(0);let I;const N=_("openLoginReminder"),K=_("isLoggedIn"),z=_("logout");async function M(){var o,s;B.value=!0,b.value="";try{const e=await se();Array.isArray(e.data)?i.value=e.data:b.value=e.data.msg||"获取轮播图失败"}catch(e){b.value=((s=(o=e==null?void 0:e.response)==null?void 0:o.data)==null?void 0:s.msg)||"获取轮播图失败"}finally{B.value=!1}}async function H(){var o,s;h.value=!0,x.value="";try{const e=await te({current:1,size:6});e.data.records?G.value=e.data.records:x.value=e.data.msg||"获取热门游戏失败"}catch(e){console.log(e),x.value=((s=(o=e==null?void 0:e.response)==null?void 0:o.data)==null?void 0:s.msg)||"获取热门游戏失败"}finally{h.value=!1}}async function L(){var o,s;y.value=!0,f.value="";try{const e=await ae({current:1,size:3});console.log(e.data),e.data.records?C.value=e.data.records:f.value=e.data.msg||"获取首发游戏失败"}catch(e){console.log(e),f.value=((s=(o=e==null?void 0:e.response)==null?void 0:o.data)==null?void 0:s.msg)||"获取首发游戏失败"}finally{y.value=!1}}async function V(){var o,s;w.value=!0,v.value="";try{const e=await le({current:1,size:3});e.data.records?R.value=e.data.records:v.value=e.data.msg||"获取推荐游戏失败"}catch(e){v.value=((s=(o=e==null?void 0:e.response)==null?void 0:o.data)==null?void 0:s.msg)||"获取推荐游戏失败"}finally{w.value=!1}}async function j(){g.value.trim()&&F.push({name:"search-results",query:{keyword:g.value}})}function T(){i.value.length>1&&(I=window.setInterval(()=>{d.value=(d.value+1)%i.value.length},5e3))}return Q(()=>{M().then(()=>{i.value.length>0&&T()}),H(),L(),V()}),X(()=>{clearInterval(I)}),(o,s)=>{const e=J("router-link");return r(),n("div",oe,[t("header",ne,[t("div",re,[s[7]||(s[7]=t("div",{class:"text-xl sm:text-2xl font-bold text-indigo-600"},[t("i",{class:"fas fa-rocket mr-1"}),p("DaoGame ")],-1)),t("div",ie,[t("div",de,[O(t("input",{type:"search","onUpdate:modelValue":s[0]||(s[0]=l=>g.value=l),onKeyup:W(j,["enter"]),placeholder:"搜索精彩游戏...",style:{color:"wheat"},class:"w-full py-2.5 px-4 pr-10 text-sm text-slate-700 rounded-full border border-slate-300 focus:ring-2 focus:ring-indigo-500 focus:outline-none focus:border-indigo-500 transition-all"},null,544),[[P,g.value]]),t("button",{onClick:j,class:"absolute right-0 top-0 bottom-0 px-3 text-slate-500 hover:text-indigo-600"},s[3]||(s[3]=[t("i",{class:"fas fa-search text-sm"},null,-1)]))])]),t("nav",ce,[m(K)()?(r(),n("div",me,[u(e,{to:"/my-games",class:"text-slate-600 hover:text-indigo-600 flex items-center mr-4"},{default:S(()=>s[4]||(s[4]=[t("i",{class:"fas fa-gamepad text-xl mr-1"},null,-1),t("span",{class:"text-sm hidden sm:inline"},"我的游戏",-1)])),_:1}),t("button",{onClick:s[1]||(s[1]=(...l)=>m(z)&&m(z)(...l)),class:"text-slate-600 hover:text-indigo-600 flex items-center"},s[5]||(s[5]=[t("i",{class:"fas fa-sign-out-alt text-xl mr-1"},null,-1),t("span",{class:"text-sm hidden sm:inline"},"退出",-1)]))])):(r(),n("button",{key:1,onClick:s[2]||(s[2]=(...l)=>m(N)&&m(N)(...l)),class:"text-slate-600 hover:text-indigo-600 flex items-center"},s[6]||(s[6]=[t("i",{class:"fas fa-user-circle text-xl mr-1"},null,-1),t("span",{class:"text-sm hidden sm:inline"},"登录",-1)])))])])]),t("main",ue,[i.value.length>0?(r(),n("section",xe,[t("div",fe,[t("div",{class:"banner-slides-wrapper",style:A({transform:`translateX(-${d.value*100}%)`})},[(r(!0),n(D,null,$(i.value,(l,c)=>(r(),n("div",{key:l.id||c,class:"banner-slide",style:A({backgroundImage:`url(${l.coverImage||l.icon})`})},[u(e,{to:{name:"game-detail",params:{id:l.id}},class:"parallax-content w-full h-full flex flex-col items-center justify-center"},{default:S(()=>[t("h2",ve,q(l.name),1),t("p",ge,q(l.description),1)]),_:2},1032,["to"])],4))),128))],4),t("div",pe,[(r(!0),n(D,null,$(i.value,(l,c)=>(r(),n("div",{key:c,class:Z(["banner-dot",{"opacity-100":d.value===c}]),onClick:Ce=>d.value=c},null,10,he))),128))])])])):Y("",!0),t("div",ye,[t("section",we,[s[8]||(s[8]=t("h2",{class:"text-xl md:text-2xl font-semibold mb-6 text-slate-800"},[t("i",{class:"fas fa-bullhorn mr-2 text-green-500"}),p("首发上线 ")],-1)),u(k,{games:C.value,loading:y.value,error:f.value,onRefresh:L},null,8,["games","loading","error"])]),t("section",be,[s[9]||(s[9]=t("h2",{class:"text-xl md:text-2xl font-semibold mb-6 text-slate-800"},[t("i",{class:"fas fa-fire mr-2 text-red-500"}),p("热门游戏/应用 ")],-1)),u(k,{games:G.value,loading:h.value,error:x.value,onRefresh:H},null,8,["games","loading","error"])]),t("section",_e,[s[10]||(s[10]=t("h2",{class:"text-xl md:text-2xl font-semibold mb-6 text-slate-800"},[t("i",{class:"fas fa-star mr-2 text-yellow-500"}),p("为你推荐 ")],-1)),u(k,{games:R.value,loading:w.value,error:v.value,onRefresh:V},null,8,["games","loading","error"])])])])])}}}),Ne=ee(ke,[["__scopeId","data-v-f8f4dc4b"]]);export{Ne as default};
